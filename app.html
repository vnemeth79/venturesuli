<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Venturesuli - Startup Finansz√≠roz√°s Tanfolyam</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
/* Reset √©s alap */
* { box-sizing: border-box; margin: 0; padding: 0; }

body { 
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
    color: #cbd5e1;
    min-height: 100vh;
    line-height: 1.6;
}

/* Loading overlay */
.loading-overlay {
    position: fixed;
    inset: 0;
    background: #0f172a;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    flex-direction: column;
    gap: 20px;
}

.loading-overlay.hidden { display: none; }

.loading-spinner {
    width: 48px;
    height: 48px;
    border: 4px solid rgba(59, 130, 246, 0.2);
    border-top-color: #3b82f6;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin { to { transform: rotate(360deg); } }

.loading-overlay p { color: #94a3b8; }

.container { max-width: 1200px; margin: 0 auto; padding: 20px; }

/* Header */
header { 
    background: rgba(30, 41, 59, 0.95);
    border-bottom: 1px solid #334155;
    padding: 16px 20px;
    position: sticky;
    top: 0;
    z-index: 100;
}

.header-content { 
    max-width: 1200px; 
    margin: 0 auto; 
    display: flex; 
    justify-content: space-between; 
    align-items: center;
    flex-wrap: wrap;
    gap: 16px;
}

.logo { display: flex; align-items: center; gap: 12px; }
.logo-icon { font-size: 28px; }
.logo-text h1 { font-size: 18px; color: #fff; font-weight: 700; }
.logo-text p { font-size: 12px; color: #64748b; }

.header-right { display: flex; align-items: center; gap: 20px; }

.user-info { display: flex; align-items: center; gap: 10px; }
.user-avatar {
    width: 36px;
    height: 36px;
    background: linear-gradient(135deg, #3b82f6, #8b5cf6);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-weight: 600;
    font-size: 14px;
}
.user-name { font-size: 14px; color: #e2e8f0; }

.logout-btn {
    padding: 8px 16px;
    background: transparent;
    border: 1px solid #334155;
    border-radius: 8px;
    color: #94a3b8;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s;
}
.logout-btn:hover { border-color: #ef4444; color: #ef4444; }

.delete-account-btn {
    padding: 6px 12px;
    background: transparent;
    border: 1px solid #6b7280;
    color: #9ca3af;
    border-radius: 6px;
    cursor: pointer;
    font-size: 12px;
    transition: all 0.2s;
}
.delete-account-btn:hover { border-color: #dc2626; color: #dc2626; background: rgba(220, 38, 38, 0.1); }

.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
}
.modal-content {
    background: #1e293b;
    border-radius: 16px;
    padding: 32px;
    max-width: 450px;
    width: 90%;
    text-align: center;
    border: 1px solid #334155;
}
.modal-icon { font-size: 48px; margin-bottom: 16px; }
.modal-title { font-size: 24px; font-weight: 700; color: #f1f5f9; margin-bottom: 12px; }
.modal-text { color: #94a3b8; margin-bottom: 24px; line-height: 1.6; }
.modal-warning { background: rgba(220, 38, 38, 0.1); border: 1px solid #dc2626; border-radius: 8px; padding: 12px; margin-bottom: 24px; color: #fca5a5; font-size: 14px; }
.modal-buttons { display: flex; gap: 12px; justify-content: center; }
.modal-btn {
    padding: 12px 24px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}
.modal-btn-cancel { background: #334155; border: none; color: #e2e8f0; }
.modal-btn-cancel:hover { background: #475569; }
.modal-btn-delete { background: #dc2626; border: none; color: white; }
.modal-btn-delete:hover { background: #b91c1c; }
.modal-btn:disabled { opacity: 0.5; cursor: not-allowed; }

.glossary-btn {
    padding: 8px 16px;
    background: linear-gradient(135deg, #8b5cf6, #6366f1);
    border: none;
    border-radius: 8px;
    color: #fff;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 6px;
}
.glossary-btn:hover { 
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
}

.progress-container { display: flex; align-items: center; gap: 16px; }
.progress-info { text-align: right; }
.progress-info p { font-size: 11px; color: #64748b; }
.progress-info span { font-size: 14px; color: #fff; font-weight: 600; }

.progress-ring { position: relative; width: 48px; height: 48px; }
.progress-ring svg { transform: rotate(-90deg); }
.progress-ring .bg { fill: none; stroke: #334155; stroke-width: 4; }
.progress-ring .fg { fill: none; stroke: #3b82f6; stroke-width: 4; stroke-linecap: round; transition: stroke-dasharray 0.3s; }
.progress-text { 
    position: absolute; 
    inset: 0; 
    display: flex; 
    align-items: center; 
    justify-content: center;
    font-size: 11px;
    font-weight: 700;
    color: #fff;
}

/* Layout */
.layout { display: flex; gap: 24px; margin-top: 24px; }
@media (max-width: 900px) { 
    .layout { flex-direction: column; }
    .header-right { flex-wrap: wrap; }
}

/* Sidebar */
.sidebar { 
    width: 300px; 
    flex-shrink: 0;
    background: rgba(30, 41, 59, 0.6);
    border: 1px solid #334155;
    border-radius: 12px;
    overflow: hidden;
    height: fit-content;
    position: sticky;
    top: 90px;
}
@media (max-width: 900px) { .sidebar { width: 100%; position: static; } }

.sidebar-header { 
    padding: 16px; 
    border-bottom: 1px solid #334155;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.sidebar-header h2 { font-size: 14px; font-weight: 600; color: #fff; }

.reset-btn { 
    font-size: 11px; 
    color: #64748b; 
    background: none; 
    border: none; 
    cursor: pointer;
}
.reset-btn:hover { color: #fff; }

.module-list { max-height: 70vh; overflow-y: auto; }

.module-item { 
    display: flex; 
    align-items: center; 
    gap: 12px;
    padding: 14px 16px;
    border-left: 3px solid transparent;
    cursor: pointer;
    transition: all 0.2s;
}
.module-item:hover { background: rgba(51, 65, 85, 0.5); }
.module-item.active { 
    background: rgba(59, 130, 246, 0.15);
    border-left-color: #3b82f6;
}
.module-item.active .module-title { color: #60a5fa; }

.module-icon { font-size: 22px; width: 28px; text-align: center; }
.module-info { flex: 1; min-width: 0; }
.module-title { 
    font-size: 13px; 
    font-weight: 500; 
    color: #e2e8f0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.module-meta { font-size: 11px; color: #64748b; margin-top: 2px; }
.module-check { color: #22c55e; font-size: 16px; }

/* Main Content */
.main { flex: 1; min-width: 0; }

.card { 
    background: rgba(30, 41, 59, 0.6);
    border: 1px solid #334155;
    border-radius: 12px;
    overflow: hidden;
}

.module-header { 
    padding: 28px;
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(139, 92, 246, 0.08));
}
.module-header-content { display: flex; align-items: center; gap: 20px; }
.module-header-icon { font-size: 48px; }
.module-header-text .label { 
    font-size: 12px; 
    color: #94a3b8; 
    text-transform: uppercase; 
    letter-spacing: 1px; 
}
.module-header-text h2 { 
    font-size: 26px; 
    color: #fff; 
    font-weight: 700; 
    margin-top: 4px; 
}

.section-nav { display: flex; gap: 8px; margin-top: 20px; flex-wrap: wrap; align-items: center; }
.section-dot { 
    height: 8px;
    border-radius: 4px;
    background: rgba(255, 255, 255, 0.25);
    cursor: pointer;
    transition: all 0.2s;
}
.section-dot:hover { background: rgba(255, 255, 255, 0.4); }
.section-dot.active { width: 28px !important; background: #fff; }
.section-dot:not(.active) { width: 8px; }
.section-dot.quiz { background: rgba(234, 179, 8, 0.5); }
.section-dot.quiz.active { background: #eab308; }

/* Content Area */
.content { padding: 28px; }
.section-title { font-size: 22px; color: #fff; font-weight: 600; margin-bottom: 20px; }
.section-body { color: #cbd5e1; font-size: 15px; }
.section-body p { margin-bottom: 14px; }
.section-body ul, .section-body ol { margin-left: 24px; margin-bottom: 14px; }
.section-body li { margin-bottom: 8px; }
.section-body strong { color: #fff; }

.section-body table { 
    width: 100%; 
    border-collapse: collapse; 
    margin: 20px 0; 
    font-size: 14px; 
}
.section-body th { 
    background: #334155; 
    padding: 12px; 
    text-align: left; 
    color: #fff; 
    font-weight: 600; 
}
.section-body td { padding: 12px; border-top: 1px solid #334155; }
.section-body tr:hover { background: rgba(51, 65, 85, 0.3); }

/* Glossary terms */
.term { 
    border-bottom: 1px dashed #60a5fa; 
    cursor: help;
    color: #93c5fd;
    transition: color 0.2s;
}
.term:hover { color: #bfdbfe; }

/* Info boxes */
.tip-box, .warning-box { 
    display: flex; 
    gap: 14px; 
    padding: 18px;
    border-radius: 10px;
    margin-top: 24px;
}
.tip-box { 
    background: rgba(34, 197, 94, 0.1); 
    border: 1px solid rgba(34, 197, 94, 0.3); 
}
.tip-box .icon { color: #4ade80; font-size: 20px; }
.tip-box p { color: #86efac; }

.warning-box { 
    background: rgba(249, 115, 22, 0.1); 
    border: 1px solid rgba(249, 115, 22, 0.3); 
}
.warning-box .icon { color: #fb923c; font-size: 20px; }
.warning-box p { color: #fdba74; }

/* Learn More Section */
.learn-more-section { 
    margin-top: 28px; 
    border-top: 1px solid #334155; 
    padding-top: 24px; 
}

.learn-more-toggle {
    display: flex;
    align-items: center;
    gap: 12px;
    width: 100%;
    padding: 18px 20px;
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(139, 92, 246, 0.1));
    border: 1px solid rgba(59, 130, 246, 0.3);
    border-radius: 10px;
    color: #60a5fa;
    font-weight: 600;
    font-size: 15px;
    cursor: pointer;
    transition: all 0.2s;
}
.learn-more-toggle:hover { 
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.25), rgba(139, 92, 246, 0.15)); 
}
.learn-more-toggle .arrow { 
    margin-left: auto; 
    transition: transform 0.3s; 
    font-size: 12px; 
}
.learn-more-toggle.open .arrow { transform: rotate(180deg); }

.learn-more-content { display: none; margin-top: 20px; }
.learn-more-content.open { display: block; }

.detailed-summary {
    background: linear-gradient(180deg, rgba(15, 23, 42, 0.8), rgba(30, 41, 59, 0.5));
    border: 1px solid #334155;
    border-radius: 12px;
    padding: 32px;
}
.detailed-summary h3 { 
    color: #fff; 
    font-size: 20px; 
    margin: 32px 0 16px; 
    padding-bottom: 8px; 
    border-bottom: 1px solid #334155; 
}
.detailed-summary h3:first-child { margin-top: 0; }
.detailed-summary h4 { 
    color: #94a3b8; 
    font-size: 14px; 
    margin: 24px 0 12px; 
    text-transform: uppercase; 
    letter-spacing: 1px; 
}
.detailed-summary p { margin-bottom: 14px; color: #cbd5e1; }
.detailed-summary ul, .detailed-summary ol { margin-left: 24px; margin-bottom: 16px; }
.detailed-summary li { margin-bottom: 8px; }
.detailed-summary strong { color: #fff; }
.detailed-summary table { 
    width: 100%; 
    border-collapse: collapse; 
    margin: 16px 0; 
    font-size: 14px; 
}
.detailed-summary th { 
    background: rgba(0, 0, 0, 0.3); 
    padding: 12px; 
    text-align: left; 
    color: #fff; 
}
.detailed-summary td { padding: 12px; border-top: 1px solid #334155; }

/* Calculation boxes */
.calc-box {
    background: rgba(34, 197, 94, 0.08);
    border: 1px solid rgba(34, 197, 94, 0.25);
    border-radius: 10px;
    padding: 24px;
    margin: 24px 0;
}
.calc-box h5 { 
    color: #4ade80; 
    font-size: 16px; 
    margin-bottom: 16px; 
    display: flex; 
    align-items: center; 
    gap: 8px; 
}
.calc-box .formula { 
    background: rgba(0, 0, 0, 0.3); 
    padding: 16px 20px; 
    border-radius: 8px; 
    font-family: 'Courier New', monospace;
    color: #fbbf24;
    margin: 12px 0;
    overflow-x: auto;
    white-space: pre-wrap;
}
.calc-box .result { 
    background: rgba(34, 197, 94, 0.15); 
    padding: 12px 16px; 
    border-radius: 6px; 
    color: #86efac;
    font-weight: 600;
    margin-top: 12px;
}
.calc-box table { background: rgba(0, 0, 0, 0.2); border-radius: 8px; overflow: hidden; }
.calc-box th { background: rgba(0, 0, 0, 0.3); }

/* Example boxes */
.example-box {
    background: rgba(59, 130, 246, 0.08);
    border: 1px solid rgba(59, 130, 246, 0.25);
    border-radius: 10px;
    padding: 24px;
    margin: 24px 0;
}
.example-box h5 { color: #60a5fa; font-size: 16px; margin-bottom: 16px; }

/* Key points */
.key-point { 
    background: linear-gradient(90deg, rgba(251, 191, 36, 0.1), transparent);
    border-left: 3px solid #fbbf24;
    padding: 12px 16px;
    margin: 16px 0;
    color: #fef3c7;
}

/* PDF button */
.pdf-btn {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 14px 24px;
    background: linear-gradient(135deg, #3b82f6, #8b5cf6);
    color: #fff;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
    margin-bottom: 24px;
}
.pdf-btn:hover { 
    transform: translateY(-2px); 
    box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3); 
}

/* Navigation Footer */
.nav-footer { 
    display: flex; 
    justify-content: space-between; 
    padding: 20px 28px;
    border-top: 1px solid #334155;
}
.nav-btn {
    padding: 12px 24px;
    border-radius: 8px;
    font-weight: 500;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
    border: none;
}
.nav-btn-secondary { background: transparent; color: #94a3b8; }
.nav-btn-secondary:hover:not(:disabled) { color: #fff; }
.nav-btn-secondary:disabled { opacity: 0.3; cursor: not-allowed; }
.nav-btn-primary { background: #3b82f6; color: #fff; }
.nav-btn-primary:hover { background: #2563eb; }
.nav-btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }

/* Quiz styles */
.quiz-header { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    margin-bottom: 16px; 
}
.quiz-header h3 { color: #fff; font-size: 18px; }
.quiz-header span { color: #94a3b8; font-size: 14px; }

.quiz-progress { 
    height: 6px; 
    background: #334155; 
    border-radius: 3px; 
    margin-bottom: 24px; 
    overflow: hidden; 
}
.quiz-progress-bar { 
    height: 100%; 
    background: linear-gradient(90deg, #3b82f6, #8b5cf6); 
    transition: width 0.3s; 
    border-radius: 3px; 
}

.quiz-question { font-size: 18px; color: #fff; margin: 24px 0; line-height: 1.5; }

.quiz-options { display: flex; flex-direction: column; gap: 12px; }
.quiz-option {
    padding: 18px 20px;
    border: 2px solid #334155;
    border-radius: 10px;
    background: rgba(51, 65, 85, 0.3);
    color: #e2e8f0;
    cursor: pointer;
    transition: all 0.2s;
    text-align: left;
    font-size: 15px;
}
.quiz-option:hover:not(:disabled) { 
    border-color: #475569; 
    background: rgba(51, 65, 85, 0.5); 
}
.quiz-option.selected { 
    border-color: #3b82f6; 
    background: rgba(59, 130, 246, 0.15); 
    color: #93c5fd; 
}
.quiz-option.correct { 
    border-color: #22c55e; 
    background: rgba(34, 197, 94, 0.15); 
    color: #86efac; 
}
.quiz-option.incorrect { 
    border-color: #ef4444; 
    background: rgba(239, 68, 68, 0.15); 
    color: #fca5a5; 
}
.quiz-option:disabled { cursor: default; }

.quiz-feedback { margin-top: 20px; padding: 18px; border-radius: 10px; }
.quiz-feedback.correct { 
    background: rgba(34, 197, 94, 0.1); 
    border: 1px solid rgba(34, 197, 94, 0.3); 
}
.quiz-feedback.correct .title { color: #22c55e; font-weight: 600; font-size: 16px; }
.quiz-feedback.incorrect { 
    background: rgba(234, 179, 8, 0.1); 
    border: 1px solid rgba(234, 179, 8, 0.3); 
}
.quiz-feedback.incorrect .title { color: #eab308; font-weight: 600; font-size: 16px; }
.quiz-feedback .explanation { color: #94a3b8; font-size: 14px; margin-top: 8px; }

.quiz-results { text-align: center; padding: 48px 24px; }
.quiz-results .icon { font-size: 72px; }
.quiz-results h3 { font-size: 28px; color: #fff; margin-top: 20px; }
.quiz-results .score { 
    font-size: 56px; 
    font-weight: 700; 
    background: linear-gradient(135deg, #3b82f6, #8b5cf6); 
    -webkit-background-clip: text; 
    -webkit-text-fill-color: transparent; 
    background-clip: text;
    margin: 20px 0; 
}
.quiz-results .pct { color: #94a3b8; font-size: 16px; }
.quiz-results .buttons { display: flex; gap: 16px; justify-content: center; margin-top: 32px; }

/* Completion badge */
.completion-badge {
    margin-top: 20px;
    padding: 20px;
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(34, 197, 94, 0.05));
    border: 1px solid rgba(34, 197, 94, 0.3);
    border-radius: 12px;
    display: flex;
    align-items: center;
    gap: 16px;
}
.completion-badge .icon { font-size: 36px; }
.completion-badge h4 { color: #22c55e; font-weight: 600; font-size: 16px; }
.completion-badge p { color: #86efac; font-size: 14px; margin-top: 4px; }

/* Definition popup */
.definition-popup {
    position: fixed;
    z-index: 1000;
    max-width: 400px;
    padding: 20px;
    background: #1e293b;
    border: 1px solid #475569;
    border-radius: 12px;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.6);
    animation: popIn 0.2s ease-out;
}
@keyframes popIn {
    from { opacity: 0; transform: scale(0.95) translateY(8px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
}
.definition-popup .term-name { color: #60a5fa; font-weight: 600; font-size: 16px; margin-bottom: 10px; }
.definition-popup .term-def { color: #cbd5e1; font-size: 14px; line-height: 1.6; }
.definition-popup .close-btn { 
    position: absolute; 
    top: 12px; 
    right: 12px; 
    background: none; 
    border: none; 
    color: #64748b; 
    cursor: pointer; 
    font-size: 20px; 
    line-height: 1; 
}
.definition-popup .close-btn:hover { color: #fff; }

/* Grid layouts */
.grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin: 20px 0; }
.grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin: 20px 0; }
@media (max-width: 700px) { .grid-2, .grid-3 { grid-template-columns: 1fr; } }

.grid-box { padding: 20px; border-radius: 10px; }
.grid-box h4 { font-weight: 600; margin-bottom: 10px; font-size: 15px; }
.grid-box p { font-size: 14px; margin: 0; }
.grid-box.blue { background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); }
.grid-box.blue h4 { color: #60a5fa; }
.grid-box.purple { background: rgba(168, 85, 247, 0.1); border: 1px solid rgba(168, 85, 247, 0.3); }
.grid-box.purple h4 { color: #c084fc; }
.grid-box.green { background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); }
.grid-box.green h4 { color: #4ade80; }
.grid-box.red { background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); }
.grid-box.red h4 { color: #f87171; }
.grid-box.yellow { background: rgba(234, 179, 8, 0.1); border: 1px solid rgba(234, 179, 8, 0.3); }
.grid-box.yellow h4 { color: #facc15; }
.grid-box.orange { background: rgba(249, 115, 22, 0.1); border: 1px solid rgba(249, 115, 22, 0.3); }
.grid-box.orange h4 { color: #fb923c; }

/* Attribution */
.attribution {
    margin-top: 40px;
    padding: 24px;
    background: rgba(30, 41, 59, 0.6);
    border: 1px solid #334155;
    border-radius: 12px;
    text-align: center;
}
.attribution h4 { color: #94a3b8; font-size: 12px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 12px; }
.attribution p { color: #64748b; font-size: 13px; line-height: 1.6; }
.attribution a { color: #60a5fa; text-decoration: none; }
.attribution a:hover { text-decoration: underline; }
.attribution .book-title { color: #fff; font-weight: 600; font-style: italic; }

/* Utility classes */
.text-green { color: #4ade80; }
.text-red { color: #f87171; }
.text-blue { color: #60a5fa; }
.text-yellow { color: #facc15; }
.text-purple { color: #c084fc; }
.highlight { color: #fbbf24; font-weight: 600; }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
        <p>Bet√∂lt√©s...</p>
    </div>

    <div id="app"></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <script>
// ==================== FIREBASE CONFIG ====================
// FONTOS: Cser√©ld ki a saj√°t Firebase projekt adataira!
const firebaseConfig = {
    apiKey: "AIzaSyCbHoaU_uZrFvZv2W3wMbV3P4FaZLE10Z0",
    authDomain: "venturesuli.firebaseapp.com",
    projectId: "venturesuli",
    storageBucket: "venturesuli.firebasestorage.app",
    messagingSenderId: "1024393704019",
    appId: "1:1024393704019:web:6bc49f0b08f83cc05c8ca6",
    measurementId: "G-5DLZGYLNYB"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// ==================== CURRENT USER ====================
let currentUser = null;
let userData = null;

// ==================== GLOSSARY ====================
const GLOSSARY = {
    "83(b) election": "IRS form, amit 30 NAPON BEL√úL be kell k√ºldeni r√©szv√©ny grant ut√°n. N√©lk√ºle a vesting alatt szerzett r√©szv√©nyek ut√°n ordinary income ad√≥t fizetsz (ak√°r 37%), m√≠g 83(b)-vel capital gains-t (max 20%). A k√ºl√∂nbs√©g ak√°r 3√ó!",
    "409a valuation": "F√ºggetlen √©rt√©kel√©s a common stock fair market value-j√°r√≥l. Sz√ºks√©ges az opci√≥k 'strike price' meghat√°roz√°s√°hoz. Tipikus k√∂lts√©g: $5-15K √©vente.",
    "accredited investor": "SEC √°ltal meghat√°rozott 'sophisticated investor' kateg√≥ria. Krit√©riumok: $200K+ √©ves j√∂vedelem (vagy $300K h√°zasp√°rk√©nt) VAGY $1M+ nett√≥ vagyon (lak√°s n√©lk√ºl).",
    "anti-dilution": "V√©delem down round eset√©n. A kor√°bbi befektet≈ëk t√∂bb r√©szv√©nyt kapnak kompenz√°ci√≥k√©nt, hogy r√©szben ellens√∫lyozz√°k az √©rt√©kveszt√©st.",
    "asset deal": "Csak bizonyos eszk√∂z√∂ket (IP, szerz≈ëd√©sek, alkalmazottak) vesznek meg, nem az eg√©sz c√©get. A VEV≈ê prefer√°lja, mert v√°logathat √©s nem √∂r√∂kli a k√∂telezetts√©geket.",
    "batna": "Best Alternative To Negotiated Agreement - a legjobb alternat√≠v√°d, ha ez a t√°rgyal√°s nem siker√ºl. Min√©l jobb a BATNA-d, ann√°l er≈ësebb a t√°rgyal√°si poz√≠ci√≥d.",
    "board of directors": "Igazgat√≥tan√°cs, ami a c√©g strat√©giai d√∂nt√©seit hozza √©s a CEO-t fel√ºgyeli. Tipikus √∂sszet√©tel Series A ut√°n: 2 common + 2 preferred + 1 f√ºggetlen.",
    "bridge loan": "√Åthidal√≥ k√∂lcs√∂n k√©t finansz√≠roz√°si k√∂r k√∂z√∂tt, √°ltal√°ban convertible note form√°ban. Kock√°zatos - gyakran azt jelzi, hogy a c√©g neh√©zs√©gekkel k√ºzd.",
    "burn rate": "A havi nett√≥ k√©szp√©nz felhaszn√°l√°s (kiad√°sok - bev√©telek). Ha $500K van a bankban √©s $50K/h√≥ a burn rate, akkor 10 h√≥nap a runway.",
    "cap table": "Capitalization table - t√°bl√°zat, ami r√©szletesen megmutatja ki h√°ny r√©szv√©nyt √©s milyen t√≠pus√∫ r√©szv√©nyt birtokol, milyen √°rfolyamon.",
    "carried interest": "A profit ~20%-a, amit a GP-k (VC partnerek) kapnak sikeres exitek ut√°n, DE csak miut√°n az LP-k visszakapt√°k a teljes t≈ëk√©j√ºket. Ez a f≈ë motiv√°ci√≥!",
    "convertible note": "K√∂lcs√∂n, ami k√©s≈ëbb (tipikusan a k√∂vetkez≈ë equity k√∂rn√©l) r√©szv√©nny√© alakul, √°ltal√°ban 10-25% kedvezm√©nnyel √©s/vagy √©rt√©kel√©si cap-pel.",
    "dilution": "H√≠gul√°s - a megl√©v≈ë tulajdonosok sz√°zal√©kos r√©szesed√©s√©nek cs√∂kken√©se √∫j r√©szv√©nyek kibocs√°t√°sakor.",
    "double trigger acceleration": "K√âT esem√©ny kell a gyors√≠tott vestinghez: (1) akviz√≠ci√≥ √âS (2) elbocs√°t√°s vagy poz√≠ci√≥v√°ltoz√°s. Ez a standard √©s fair megold√°s.",
    "down round": "Finansz√≠roz√°si k√∂r alacsonyabb √©rt√©kel√©ssel, mint az el≈ëz≈ë. Rossz jel, de nem v√©gzetes. Triggereli az anti-dilution v√©delmet.",
    "drag-along": "Jog, ami lehet≈ëv√© teszi a t√∂bbs√©gi tulajdonosoknak, hogy k√©nyszer√≠ts√©k a kisebbs√©gieket a r√©szv√©nyek elad√°s√°ra ugyanolyan felt√©telekkel.",
    "drag-along rights": "Jog, ami lehet≈ëv√© teszi a t√∂bbs√©gi tulajdonosoknak, hogy k√©nyszer√≠ts√©k a kisebbs√©gieket a r√©szv√©nyek elad√°s√°ra ugyanolyan felt√©telekkel.",
    "earn-out": "Felt√©teles fizet√©s bizonyos c√©lok (bev√©tel, profit, felhaszn√°l√≥k) el√©r√©s√©hez k√∂tve az akviz√≠ci√≥ ut√°n. FIGYELEM: statisztikailag az earn-out-ok nagy r√©sze NEM teljes√ºl!",
    "escrow": "A v√©tel√°r egy r√©sze (tipikusan 10-20%), amit visszatartanak 12-24 h√≥napig esetleges probl√©m√°k fedez√©s√©re.",
    "fiduciary duty": "Bizalmi k√∂telezetts√©g - a board tagok k√∂teless√©ge a r√©szv√©nyesek legjobb √©rdek√©ben cselekedni. Jogilag kik√©nyszer√≠thet≈ë.",
    "full ratchet": "A legagressz√≠vebb anti-dilution forma. Down round eset√©n a kor√°bbi befektet≈ëk r√©szv√©ny√°ra TELJESEN lecs√∂kken az √∫j √°rra. KER√úLEND≈ê!",
    "letter of intent": "Akviz√≠ci√≥ els≈ë hivatalos l√©p√©se. A legt√∂bb pont NEM k√∂telez≈ë √©rv√©ny≈±, kiv√©tel: titoktart√°s, exkluzivit√°s, k√∂lts√©gek.",
    "loi": "Letter of Intent - Akviz√≠ci√≥ els≈ë hivatalos l√©p√©se. A legt√∂bb pont NEM k√∂telez≈ë √©rv√©ny≈±, kiv√©tel: titoktart√°s, exkluzivit√°s, k√∂lts√©gek.",
    "limited partnership": "LP strukt√∫ra: Limited Partners (passz√≠v befektet≈ëk) + General Partners (akt√≠v kezel≈ëk). Az LP-k korl√°tozott felel≈ëss√©ggel b√≠rnak.",
    "liquidation preference": "Exit eset√©n a befektet≈ëk el≈ësz√∂r kapj√°k vissza befektet√©s√ºket (vagy annak t√∂bbsz√∂r√∂s√©t), miel≈ëtt b√°rki m√°s p√©nzt l√°tna.",
    "management fee": "√âves d√≠j az alap kezel√©s√©√©rt, tipikusan 1.5-2.5% az alap m√©ret√©b≈ël. Egy $200M alapn√°l ez $3-5M/√©v.",
    "micro vc": "Kis m√©ret≈± VC alap ($25-100M), ami gyakran egy super angel-b≈ël n≈ëtt ki. Fiduci√°ros k√∂telezetts√©ge van az LP-k fel√©.",
    "no-shop clause": "Exkluzivit√°si z√°rad√©k (tipikusan 45-60 nap), ami megtiltja m√°s befektet≈ëkkel val√≥ t√°rgyal√°st a term sheet al√°√≠r√°sa ut√°n.",
    "non-participating preferred": "A VC V√ÅLASZT: liquidation preference VAGY tulajdoni ar√°ny szerinti r√©szesed√©s (konverzi√≥ common-ra). Ez a v√°llalkoz√≥bar√°t v√°ltozat.",
    "option pool": "J√∂v≈ëbeli alkalmazottaknak fenntartott r√©szv√©nyek. √Åltal√°ban 15-25% post-money alapon. FONTOS: az option pool n√∂vel√©se pre-money alapon t√∂rt√©nik!",
    "participating preferred": "A VC el≈ësz√∂r megkapja a liquidation preference-t, AZT√ÅN m√©g r√©szesedik is a marad√©kb√≥l. 'Double dip' - k√©tszer kap. Ker√ºlend≈ë!",
    "pay-to-play": "Ha a befektet≈ë NEM vesz r√©szt a k√∂vetkez≈ë k√∂rben ar√°nyosan, elvesz√≠ti a preferred jogait (r√©szv√©nyei common-ra konvert√°l√≥dnak). J√ì neked!",
    "post-money valuation": "A c√©g √©rt√©kel√©se a befektet√©s UT√ÅN, tartalmazza a befektetett √∂sszeget is. Post-money = Pre-money + Befektet√©s.",
    "pre-money valuation": "A c√©g √©rt√©kel√©se a befektet√©s EL≈êTT. Ha $20M pre-money √©s $5M befektet√©s, akkor a post-money $25M, √©s a VC 20%-ot kap.",
    "pro rata rights": "Ar√°nyos jog a k√∂vetkez≈ë k√∂r√∂kben val√≥ r√©szv√©telre. Lehet≈ëv√© teszi a befektet≈ënek, hogy megtartsa a tulajdoni ar√°ny√°t.",
    "protective provisions": "Befektet≈ëi v√©t√≥jogok bizonyos kritikus d√∂nt√©sekre: c√©g elad√°sa, √∫j r√©szv√©nyoszt√°ly, alap√≠t√≥ okirat m√≥dos√≠t√°s, hitelfelv√©tel limit felett.",
    "qualified ipo": "IPO ami el√©r bizonyos k√ºsz√∂b√∂t (pl. $50M+ √©s meghat√°rozott r√©szv√©ny√°r), √©s automatikusan triggereli a preferred‚Üícommon konverzi√≥t.",
    "runway": "H√°ny h√≥napig el√©g a p√©nz a jelenlegi burn rate mellett. Sz√°m√≠t√°s: K√©szp√©nz / Havi Burn Rate. Minimum 6 h√≥nap runway-ed legyen!",
    "series a": "Az els≈ë jelent≈ës VC finansz√≠roz√°si k√∂r, tipikusan $2-15M, int√©zm√©nyi befektet≈ëkt≈ël. Ez az els≈ë 'priced round'.",
    "single trigger acceleration": "Egyetlen esem√©ny (tipikusan akviz√≠ci√≥) automatikusan vest-eli az √∂sszes r√©szv√©nyt. Ritka √©s nem aj√°nlott.",
    "stock deal": "Az eg√©sz c√©get (minden r√©szv√©nyt) megveszik. Az ELAD√ì prefer√°lja, mert tiszta exit - minden k√∂telezetts√©g √°tmegy a vev≈ëre.",
    "super angel": "Tapasztalt, sikeres v√°llalkoz√≥, aki rendszeresen (√©vente 5-20√ó) befektet korai f√°zis√∫ startupokba saj√°t p√©nz√©b≈ël. Tipikus befektet√©s: $25K-$500K.",
    "term sheet": "Nem k√∂telez≈ë √©rv√©ny≈± dokumentum, ami √∂sszefoglalja a befektet√©s f≈ë felt√©teleit. Kiv√©telek: no-shop z√°rad√©k, titoktart√°s, jogi k√∂lts√©gek.",
    "vesting": "A r√©szv√©nyek fokozatos megszerz√©se id≈ëvel. Standard: 4 √©v id≈ëtartam, 1 √©v cliff. Biztos√≠tja a hossz√∫ t√°v√∫ elk√∂telez≈ëd√©st.",
    "weighted average": "A fair anti-dilution forma. Figyelembe veszi az √∫j k√∂r m√©ret√©t is a korrekci√≥ sz√°m√≠t√°s√°n√°l. A 'broad-based' a standard.",
    "weighted average anti-dilution": "A fair anti-dilution forma. Figyelembe veszi az √∫j k√∂r m√©ret√©t is a korrekci√≥ sz√°m√≠t√°s√°n√°l. A 'broad-based' a standard."
};

// ==================== MODULES - 13 FEJEZET ====================
const MODULES = [
    // ==================== MODUL 1: SZEREPL≈êK √âS √ñKOSZISZT√âMA ====================
    {
        id: 1,
        title: "A Szerepl≈ëk √©s az √ñkosziszt√©ma",
        icon: "üë•",
        time: "30 perc",
        sections: [
            {
                title: "A V√°llalkoz√≥ Szerepe",
                content: `<p>A venture capital √∂kosziszt√©m√°ban a <strong>v√°llalkoz√≥ az abszol√∫t k√∂z√©ppont</strong>. B√°r a VC-k professzion√°lis befektet≈ëk, a finansz√≠roz√°si t√°rgyal√°s v√©gs≈ë felel≈ëss√©ge mindig a v√°llalkoz√≥√©.</p>
                <p>√ârtened kell, mit csin√°lnak a nevedben, √©s k√©pesnek kell lenned ellen≈ërizni a munk√°jukat.</p>`,
                tip: "A v√°llalkoz√≥nak √©rtenie KELL a finansz√≠roz√°si felt√©teleket. Ne deleg√°ld az √ºgyv√©dekre!"
            },
            {
                title: "A T√°rsalap√≠t√≥k √©s Vesting",
                content: `<p>A t√°rsalap√≠t√≥k k√∂z√∂tti viszony id≈ëvel v√°ltozhat. Ez√©rt l√©tezik a <span class="term" data-term="vesting">vesting</span>.</p>
                <div class="calc-box">
                    <h5>üßÆ Standard Vesting</h5>
                    <div class="formula">4 √©v id≈ëtartam, 1 √©v cliff, havi vesting ut√°na
Cliff ut√°n: Teljes √ó 75% √∑ 36 = havi vesting</div>
                </div>`,
                warning: "Ha a CTO 18 h√≥nap ut√°n t√°vozik: csak a vest-elt r√©szv√©nyeket viszi, a t√∂bbi visszamegy a c√©ghez!"
            },
            {
                title: "A VC Hierarchia",
                content: `<table>
                    <thead><tr><th>Poz√≠ci√≥</th><th>D√∂nt√©si jog</th><th>Feladat</th></tr></thead>
                    <tbody>
                        <tr><td><strong>Managing Director / GP</strong></td><td class="text-green">TELJES</td><td>Befektet√©si d√∂nt√©sek, board tags√°g</td></tr>
                        <tr><td><strong>Principal / Director</strong></td><td class="text-yellow">Korl√°tozott</td><td>Deal-ek vezet√©se, de nem d√∂nt egyed√ºl</td></tr>
                        <tr><td><strong>Associate</strong></td><td class="text-red">NINCS</td><td>Deal sourcing, due diligence</td></tr>
                        <tr><td><strong>Analyst</strong></td><td class="text-red">NINCS</td><td>Piackutat√°s, memo √≠r√°s</td></tr>
                    </tbody>
                </table>`,
                warning: "Ha Associate-tel besz√©lsz, ≈ë csak inform√°ci√≥t gy≈±jt - a d√∂nt√©st a Managing Director hozza!"
            },
            {
                title: "Angyal Befektet≈ëk √©s √úgyv√©dek",
                content: `<div class="grid-2">
                    <div class="grid-box blue">
                        <h4>ü¶∏ <span class="term" data-term="super angel">Super Angel</span></h4>
                        <p>Sikeres v√°llalkoz√≥k, √©vente 5-20 deal, $25K-$500K befektet√©s.</p>
                    </div>
                    <div class="grid-box purple">
                        <h4>üíº <span class="term" data-term="micro vc">Micro VC</span></h4>
                        <p>Super angel, aki m√°r m√°sok p√©nz√©t is kezeli. Fiduci√°ros k√∂telezetts√©g!</p>
                    </div>
                </div>`,
                tip: "SOHA ne k√©rd a VC-t, hogy aj√°nljon √ºgyv√©det! √ârdekellent√©t."
            }
        ],
        quiz: [
            { q: "Ki hozza a v√©gs≈ë befektet√©si d√∂nt√©seket egy VC c√©gn√©l?", o: ["Associate", "Principal", "Managing Director / GP", "Analyst"], a: 2, e: "A Managing Director vagy General Partner rendelkezik teljes d√∂nt√©si jogk√∂rrel." },
            { q: "Mi a f≈ë k√ºl√∂nbs√©g a super angel √©s micro VC k√∂z√∂tt?", o: ["A befektet√©s m√©rete", "A micro VC m√°sok p√©nz√©t is kezeli", "Nincs k√ºl√∂nbs√©g", "A micro VC csak tech c√©gekbe fektet"], a: 1, e: "A micro VC m√°r alapot kezel √©s m√°sok p√©nz√©t is befekteti, fiduci√°ros felel≈ëss√©ggel." },
            { q: "K√©rheted-e a VC-t, hogy aj√°nljon neked √ºgyv√©det?", o: ["Igen, ≈ëk ismerik a j√≥kat", "NEM - ez √©rdekellent√©t", "Csak Series A-n√°l", "Mindegy"], a: 1, e: "A VC √°ltal aj√°nlott √ºgyv√©d a VC √©rdekeit k√©pviseli, nem a ti√©det." }
        ],
        detailed: `<h3>A V√°llalkoz√≥ Szerepe</h3>
<p>A venture capital √∂kosziszt√©m√°ban a <strong>v√°llalkoz√≥ az abszol√∫t k√∂z√©ppont</strong>. B√°r a VC-k professzion√°lis befektet≈ëk t√∂bb √©vtizedes tapasztalattal, √©s az √ºgyv√©dek jogi szak√©rt≈ëk, a finansz√≠roz√°si t√°rgyal√°s v√©gs≈ë felel≈ëss√©ge mindig a v√°llalkoz√≥√©.</p>
<p>Ez nem azt jelenti, hogy ne haszn√°lj szak√©rt≈ëket - √©pp ellenkez≈ëleg. De <strong>√©rtened kell, mit csin√°lnak a nevedben</strong>, √©s k√©pesnek kell lenned ellen≈ërizni a munk√°jukat. Egy rossz √ºgyv√©di tan√°cs vagy egy f√©lre√©rtett felt√©tel √©vekre megkeser√≠theti az √©leted.</p>

<h3>A T√°rsalap√≠t√≥k Dinamik√°ja</h3>
<p>Az egyik legk√©nyesebb t√©ma a t√°rsalap√≠t√≥k k√∂z√∂tti viszony. A kezdeti lelkesed√©s id≈ëvel cs√∂kken, az √©lethelyzetek v√°ltoznak, √©s ami kezdetben fair-nek t≈±nt, k√©s≈ëbb igazs√°gtalannak √©rezhet≈ë. Ez√©rt l√©tezik a <span class="term" data-term="vesting">vesting</span>.</p>

<div class="calc-box">
<h5>üßÆ Vesting Sz√°m√≠t√°si P√©lda</h5>
<p><strong>Standard vesting strukt√∫ra:</strong> 4 √©v, 1 √©v cliff, havi vesting ut√°na</p>
<p>P√©lda: 3 t√°rsalap√≠t√≥, 1,000,000 r√©szv√©ny √∂sszesen</p>
<table>
<thead><tr><th>Alap√≠t√≥</th><th>Kezdeti %</th><th>R√©szv√©ny</th><th>6 h√≥ ut√°n</th><th>1 √©v ut√°n</th><th>4 √©v ut√°n</th></tr></thead>
<tbody>
<tr><td>CEO</td><td>50%</td><td>500,000</td><td class="text-red">0 (cliff!)</td><td>125,000</td><td>500,000</td></tr>
<tr><td>CTO</td><td>30%</td><td>300,000</td><td class="text-red">0 (cliff!)</td><td>75,000</td><td>300,000</td></tr>
<tr><td>COO</td><td>20%</td><td>200,000</td><td class="text-red">0 (cliff!)</td><td>50,000</td><td>200,000</td></tr>
</tbody>
</table>
<div class="formula">Cliff ut√°n havi vesting = Teljes r√©szv√©ny √ó 75% / 36 h√≥nap
Pl. CEO: 500,000 √ó 0.75 / 36 = 10,416 r√©szv√©ny / h√≥nap</div>
<div class="result">Ha a CTO 18 h√≥nap ut√°n t√°vozik: 75,000 + (6 √ó 6,250) = 112,500 r√©szv√©ny vest, 187,500 visszamegy a c√©ghez!</div>
</div>

<h3>A VC C√©g Fel√©p√≠t√©se</h3>
<p>A VC c√©gek hierarchikusak. <strong>Nagyon fontos tudni, kivel besz√©lsz</strong>, mert ez meghat√°rozza, milyen f√°zisban van a deal.</p>
<table>
<thead><tr><th>Poz√≠ci√≥</th><th>D√∂nt√©si jog</th><th>Feladat</th></tr></thead>
<tbody>
<tr><td><strong>Managing Director / GP</strong></td><td class="text-green">TELJES</td><td>Befektet√©si d√∂nt√©sek, board tags√°g</td></tr>
<tr><td><strong>Principal / Director</strong></td><td class="text-yellow">Korl√°tozott</td><td>Deal-ek vezet√©se, de nem d√∂nt egyed√ºl</td></tr>
<tr><td><strong>Associate</strong></td><td class="text-red">NINCS</td><td>Deal sourcing, due diligence</td></tr>
<tr><td><strong>Analyst</strong></td><td class="text-red">NINCS</td><td>Piackutat√°s, memo √≠r√°s</td></tr>
</tbody>
</table>
<div class="key-point">‚ö†Ô∏è <strong>FONTOS:</strong> Ha Associate-tel besz√©lsz, ≈ë csak inform√°ci√≥t gy≈±jt - a d√∂nt√©st a Managing Director hozza!</div>

<h3>Angyal Befektet≈ëk</h3>
<p>Az angyal befektet≈ëk egy√©ni befektet≈ëk, akik saj√°t p√©nz√ºkb≈ël fektetnek korai f√°zis√∫ c√©gekbe.</p>
<div class="grid-2">
<div class="grid-box blue">
<h4>ü¶∏ Super Angel</h4>
<p>Sikeres v√°llalkoz√≥k, akik rendszeresen befektetnek startupokba (√©vente 5-20 deal). √Åltal√°ban $25K-$500K k√∂z√∂tti √∂sszegeket fektetnek be. <strong>√ârt√©k√ºk nem csak a p√©nz, hanem a tapasztalat √©s a network.</strong></p>
</div>
<div class="grid-box purple">
<h4>üíº Micro VC</h4>
<p>Amikor egy super angel m√°s befektet≈ëk p√©nz√©t is elkezdi kezelni, micro VC-v√© v√°lik. Ez fontos k√ºl√∂nbs√©g, mert a micro VC-nek <strong>fiduci√°ros k√∂telezetts√©ge</strong> van az LP-i fel√©.</p>
</div>
</div>

<h3>Az √úgyv√©d Kiv√°laszt√°sa</h3>
<p><strong>Amit keresned kell:</strong></p>
<ul>
<li>VC finansz√≠roz√°si tapasztalat (nem √°ltal√°nos c√©gjog!)</li>
<li>Helyi/region√°lis jelenl√©t</li>
<li>Referenci√°k m√°s v√°llalkoz√≥kt√≥l</li>
<li>Hajland√≥s√°g deferred fee-re (fizet√©s a z√°r√°skor)</li>
</ul>
<div class="key-point">‚ö†Ô∏è <strong>SOHA ne k√©rd a VC-t, hogy aj√°nljon √ºgyv√©det!</strong> A VC √°ltal aj√°nlott √ºgyv√©d a VC √©rdekeit fogja k√©pviselni, nem a ti√©det. Ez √©rdekellent√©t.</div>`
    },
    // ==================== MODUL 2: HOGYAN SZEREZZ T≈êK√âT ====================
    {
        id: 2,
        title: "Hogyan Szerezz T≈ëk√©t",
        icon: "üéØ",
        time: "25 perc",
        sections: [
            {
                title: "A Yoda Szab√°ly",
                content: `<p class="highlight" style="font-size: 20px; text-align: center; padding: 16px 0;">"Do or do not; there is no try." - Yoda</p>
                <p>Ha azt mondod <em>"pr√≥b√°lok t≈ëk√©t szerezni"</em>, ez jelzi, hogy nem vagy sikeres. <strong>Indulj a siker felt√©telez√©s√©vel!</strong></p>`,
                tip: "Ne mondd: 'T≈ëk√©t keres√ºnk.' Mondd: '$2 milli√≥t gy≈±jt√ºnk a Series A MVP el√©r√©s√©hez.'"
            },
            {
                title: "Mennyi T≈ëk√©t Szerezz?",
                content: `<ol>
                    <li>Hat√°rozd meg a k√∂vetkez≈ë m√©rf√∂ldk√∂vet</li>
                    <li>Becs√ºld meg a <span class="term" data-term="burn rate">burn rate</span>-et</li>
                    <li>Adj hozz√° 50% id≈ëpuffert</li>
                </ol>
                <div class="calc-box">
                    <h5>üßÆ T≈ëkeig√©ny Sz√°m√≠t√°s</h5>
                    <div class="formula">12 h√≥ √ó $70K burn √ó 1.5 = $1.26M ‚Üí $1.3M</div>
                </div>`,
                warning: "NE adj meg tartom√°nyt! '$5-7 milli√≥' = 'Nem tudom, mennyi kell'. Mondj EGY sz√°mot!"
            },
            {
                title: "A VC D√∂nt√©si Kateg√≥ri√°k",
                content: `<table>
                    <thead><tr><th>Kateg√≥ria</th><th>Viselked√©s</th><th>Teend≈ë</th></tr></thead>
                    <tbody>
                        <tr><td class="text-green"><strong>LEADER</strong></td><td>Akt√≠van √©rdekl≈ëdik</td><td>Agressz√≠ven k√∂vesd!</td></tr>
                        <tr><td class="text-red"><strong>PASS</strong></td><td>Nemet mondott</td><td>Ne pazarold az id≈ëd</td></tr>
                        <tr><td class="text-yellow"><strong>MAYBE</strong></td><td>√ârdekl≈ëdik, de nem l√©p</td><td>Tartsd melegen</td></tr>
                        <tr><td class="text-red"><strong>SLOW NO</strong></td><td>Soha nem mond nemet</td><td>Kezeld NEM-k√©nt!</td></tr>
                    </tbody>
                </table>`,
                warning: "A 'slow no' a legvesz√©lyesebb! Soha nem utas√≠t el, de v√©gtelen id≈ët pazarolhatsz r√°."
            },
            {
                title: "NE K√©rj NDA-t!",
                content: `<p><strong>Soha ne k√©rj titoktart√°si meg√°llapod√°st (NDA) egy VC-t≈ël!</strong></p>
                <ul>
                    <li>A VC-k rengeteg hasonl√≥ c√©get l√°tnak</li>
                    <li>Az √∂tlet v√©grehajt√°sa sz√°m√≠t, nem maga az √∂tlet</li>
                    <li>A VC ipar√°g kis vil√°g - a rossz h√≠rn√©v gyorsan terjed</li>
                </ul>`,
                tip: "Ha passzolnak, k√©rd meg ≈ëket, hogy mondj√°k el MI√âRT. Ez √©rt√©kes visszajelz√©s!"
            }
        ],
        quiz: [
            { q: "Mi a 'slow no' viselked√©s?", o: ["Azonnal nemet mond", "Soha nem mond nemet, de semmi nem mozdul", "Lassan befektet", "Kis √∂sszegeket fektet"], a: 1, e: "A 'slow no' soha nem utas√≠t el ny√≠ltan, de nem halad el≈ëre - v√©gtelen id≈ët pazarolhatsz r√°." },
            { q: "Mi√©rt rossz tartom√°nyt megadni a t≈ëkeig√©nyn√©l?", o: ["T√∫l sok p√©nz", "Bizonytalans√°got sugall", "A VC-k nem √©rtik", "Jogi probl√©ma"], a: 1, e: "A tartom√°ny azt sugallja, nem gondoltad v√©gig, mennyi kell val√≥j√°ban." },
            { q: "K√©rhetsz-e NDA-t egy VC-t≈ël?", o: ["Igen, mindig", "NEM - amat≈ërt jelez", "Csak seed f√°zisn√°l", "Csak nagy √∂sszegn√©l"], a: 1, e: "NDA k√©r√©se amat≈ërt jelez. A VC-k rengeteg hasonl√≥ c√©get l√°tnak, nem tudn√°nak m≈±k√∂dni NDA-kkal." }
        ],
        detailed: `<h3>A Yoda Szab√°ly</h3>
<p class="highlight" style="font-size: 20px; text-align: center; padding: 20px;">"Do or do not; there is no try." - Yoda</p>
<p>Ha azt mondod <em>'pr√≥b√°lok t≈ëk√©t szerezni'</em> vagy <em>'tesztelem a vizeket'</em>, ez jelzi, hogy nem vagy sikeres. <strong>Indulj a siker felt√©telez√©s√©vel!</strong> A bizonytalans√°g √©rezhet≈ë - a befektet≈ëk meg√©rzik, ha nem vagy magabiztos.</p>
<div class="key-point">üí° <strong>Ne mondd:</strong> 'T≈ëk√©t keres√ºnk.' <strong>Mondd:</strong> '$2 milli√≥t gy≈±jt√ºnk a Series A MVP el√©r√©s√©hez.'</div>

<h3>Mennyi T≈ëk√©t Szerezz?</h3>
<p>Ne bonyolult modellekkel sz√°molj - azok MINDIG hib√°sak! Egyszer≈± m√≥dszer:</p>
<ol>
<li>Hat√°rozd meg a k√∂vetkez≈ë m√©rf√∂ldk√∂vet</li>
<li>Becs√ºld meg a havi k√∂lt√©st (<span class="term" data-term="burn rate">burn rate</span>)</li>
<li>Adj hozz√° 50% id≈ëpuffert</li>
</ol>

<div class="calc-box">
<h5>üßÆ T≈ëkeig√©ny Sz√°m√≠t√°si P√©lda</h5>
<table>
<thead><tr><th>K√∂lts√©gelem</th><th>Havi k√∂lts√©g</th><th>Megjegyz√©s</th></tr></thead>
<tbody>
<tr><td>Alap√≠t√≥k fizet√©se (3 f≈ë)</td><td>$30,000</td><td>$10K/f≈ë, piac alatt</td></tr>
<tr><td>Fejleszt≈ëk (2 f≈ë)</td><td>$24,000</td><td>$12K/f≈ë</td></tr>
<tr><td>Infrastrukt√∫ra (AWS)</td><td>$3,000</td><td>Sk√°l√°z√≥dik</td></tr>
<tr><td>Iroda + egy√©b</td><td>$5,000</td><td>Coworking</td></tr>
<tr><td>Marketing/Sales</td><td>$8,000</td><td>Kezdeti tesztek</td></tr>
<tr><td><strong>√ñSSZESEN</strong></td><td><strong>$70,000</strong></td><td>Havi burn rate</td></tr>
</tbody>
</table>
<div class="formula">Becs√ºlt id≈ë $100K ARR-ig: 12 h√≥nap
Alap t≈ëkeig√©ny: 12 √ó $70,000 = $840,000
50% puffer: $840,000 √ó 1.5 = $1,260,000</div>
<div class="result">Kerek√≠tett t≈ëkeig√©ny: $1.3M vagy $1.5M (EGY konkr√©t sz√°m, nem tartom√°ny!)</div>
</div>

<div class="key-point">‚ö†Ô∏è <strong>NE adj meg tartom√°nyt!</strong> '$5-7 milli√≥' = 'Nem tudom, mennyi kell'. Mondj EGY konkr√©t sz√°mot!</div>

<h3>A VC D√∂nt√©si Kateg√≥ri√°k</h3>
<table>
<thead><tr><th>Kateg√≥ria</th><th>Viselked√©s</th><th>Teend≈ë</th></tr></thead>
<tbody>
<tr><td class="text-green"><strong>1. LEADER</strong></td><td>Egy√©rtelm≈±en √©rdekl≈ëdik, akt√≠van k√©rdez</td><td>Agressz√≠ven k√∂vesd!</td></tr>
<tr><td class="text-red"><strong>2. PASS</strong></td><td>Egy√©rtelm≈±en nemet mondott</td><td>Ne pazarold az id≈ëd</td></tr>
<tr><td class="text-yellow"><strong>3. MAYBE</strong></td><td>√ârdekl≈ëdik, de nem l√©p el≈ëre</td><td>Tartsd melegen, de ne f√ºggj t≈ële</td></tr>
<tr><td class="text-red"><strong>4. SLOW NO</strong></td><td>Soha nem mond nemet, semmi nem mozdul</td><td>Kezeld NEM-k√©nt! √Åll√≠ts hat√°rid≈ët</td></tr>
</tbody>
</table>
<div class="key-point">‚ö†Ô∏è A <strong>'slow no' a legvesz√©lyesebb!</strong> Soha nem utas√≠t el ny√≠ltan, de v√©gtelen id≈ët pazarolhatsz r√°.</div>

<h3>NE K√©rj NDA-t!</h3>
<p><strong>Soha ne k√©rj titoktart√°si meg√°llapod√°st (NDA) egy VC-t≈ël!</strong></p>
<ul>
<li>A VC-k rengeteg hasonl√≥ c√©get l√°tnak - ha mindenkinek NDA-t √≠rn√°nak al√°, nem tudn√°nak m≈±k√∂dni</li>
<li>NDA blokkoln√° ≈ëket abban, hogy m√°s befektet≈ëkkel besz√©ljenek r√≥lad</li>
<li>Az √∂tlet v√©grehajt√°sa sz√°m√≠t, nem maga az √∂tlet</li>
<li>A VC ipar√°g kis vil√°g - a rossz h√≠rn√©v gyorsan terjed</li>
</ul>
<div class="key-point">üí° Ha passzolnak, k√©rd meg ≈ëket, hogy mondj√°k el MI√âRT. Ez az egyik leg√©rt√©kesebb visszajelz√©s!</div>

<h3>A Helyes Megk√∂zel√≠t√©s</h3>
<div class="example-box">
<h5>‚úì Amit csin√°lj:</h5>
<ul>
<li>√âp√≠ts kapcsolatokat MIEL≈êTT p√©nzre lenne sz√ºks√©ged</li>
<li>K√©rj bemutat√°st m√°s v√°llalkoz√≥kt√≥l</li>
<li>L√©gy felk√©sz√ºlt √©s professzion√°lis</li>
<li>Ismerd a VC portf√≥li√≥j√°t - ne pitch-elj konkurens c√©g befektet≈ëknek</li>
<li>K√∂vess fel gyorsan, de ne l√©gy tolakod√≥</li>
</ul>
</div>
<div class="key-point">üí° A legjobb befektet≈ëk azokba a c√©gekbe fektetnek, akiket m√°r ismernek. <strong>√âp√≠ts kapcsolatot el≈ëre!</strong></div>`
    },
    // ==================== MODUL 3: GAZDAS√ÅGI FELT√âTELEK ====================
    {
        id: 3,
        title: "Gazdas√°gi Felt√©telek",
        icon: "üí∞",
        time: "35 perc",
        sections: [
            {
                title: "A K√©t Legfontosabb Dolog",
                content: `<div class="grid-2">
                    <div class="grid-box blue" style="text-align: center; padding: 28px;">
                        <h4 style="font-size: 32px;">üí∞</h4>
                        <h4>ECONOMICS</h4>
                    </div>
                    <div class="grid-box purple" style="text-align: center; padding: 28px;">
                        <h4 style="font-size: 32px;">üéõÔ∏è</h4>
                        <h4>CONTROL</h4>
                    </div>
                </div>`,
                tip: "F√≥kusz√°lj erre a kett≈ëre, minden m√°s m√°sodlagos!"
            },
            {
                title: "Pre vs Post-money CSAPDA",
                content: `<p>$5M befektet√©s "$20M √©rt√©kel√©sn√©l" - de melyik?</p>
                <div class="grid-2">
                    <div class="grid-box blue">
                        <h4>$20M PRE-money</h4>
                        <p class="text-green">‚Üí VC kap 20%</p>
                    </div>
                    <div class="grid-box purple">
                        <h4>$20M POST-money</h4>
                        <p class="text-red">‚Üí VC kap 25%</p>
                    </div>
                </div>`,
                warning: "Mindig k√©rdezz r√°: 'Ez PRE-money, ugye?'"
            },
            {
                title: "Liquidation Preference",
                content: `<table>
                    <thead><tr><th>T√≠pus</th><th>Neked</th></tr></thead>
                    <tbody>
                        <tr><td><span class="term" data-term="non-participating preferred">1√ó Non-participating</span></td><td class="text-green">LEGJOBB</td></tr>
                        <tr><td><span class="term" data-term="participating preferred">1√ó Participating</span></td><td class="text-red">ROSSZ</td></tr>
                        <tr><td>2√ó Participating</td><td class="text-red">NAGYON ROSSZ</td></tr>
                    </tbody>
                </table>`,
                warning: "A participating preferred eset√©n a VC k√©tszer kap!"
            }
        ],
        quiz: [
            { q: "$5M befektet√©s $20M POST-money-n√°l. H√°ny % a VC?", o: ["20%", "25%", "33%", "40%"], a: 1, e: "$5M / $20M = 25%" },
            { q: "Melyik anti-dilution a standard?", o: ["Full ratchet", "Narrow-based", "Broad-based weighted avg", "Nincs"], a: 2, e: "A broad-based weighted average a legigazs√°gosabb." }
        ],
        detailed: `<h3>A K√©t Legfontosabb Dolog</h3>
<p>A <span class="term" data-term="term sheet">term sheet</span>-ben csak <strong>K√âT dolog sz√°m√≠t igaz√°n:</strong></p>
<div class="grid-2">
<div class="grid-box blue" style="text-align: center; padding: 30px;">
<h4 style="font-size: 40px; margin-bottom: 10px;">üí∞</h4>
<h4>ECONOMICS</h4>
<p>Gazdas√°gi felt√©telek: ki kap mennyit</p>
</div>
<div class="grid-box purple" style="text-align: center; padding: 30px;">
<h4 style="font-size: 40px; margin-bottom: 10px;">üéõÔ∏è</h4>
<h4>CONTROL</h4>
<p>Ir√°ny√≠t√°s: ki d√∂nt mir≈ël</p>
</div>
</div>
<div class="key-point">üí° Minden m√°s m√°sodlagos. Ha a VC m√°s pontokon akad fenn, val√≥sz√≠n≈±leg bl√∂ff√∂l.</div>

<h3>Pre-money vs Post-money CSAPDA</h3>
<p>Ez az egyik <strong>leggyakoribb f√©lre√©rt√©s</strong>. A k√ºl√∂nbs√©g √≥ri√°si hat√°ssal lehet a tulajdonosi ar√°nyokra!</p>

<div class="calc-box">
<h5>üßÆ Pre vs Post-money Sz√°m√≠t√°s</h5>
<table>
<thead><tr><th>√ârtelmez√©s</th><th>Pre-money</th><th>Post-money</th><th>VC %</th><th>Alap√≠t√≥ %</th></tr></thead>
<tbody>
<tr><td>$20M <strong>PRE</strong>-money</td><td>$20M</td><td>$25M</td><td class="text-green">20%</td><td class="text-green">80%</td></tr>
<tr><td>$20M <strong>POST</strong>-money</td><td>$15M</td><td>$20M</td><td class="text-red">25%</td><td class="text-red">75%</td></tr>
</tbody>
</table>
<div class="formula">PRE-money eset√©n: VC% = $5M / ($20M + $5M) = 20%
POST-money eset√©n: VC% = $5M / $20M = 25%</div>
<div class="result">K√ºl√∂nbs√©g: 5 sz√°zal√©kpont = JELENT≈êS!
Ha az alap√≠t√≥nak 80% helyett 75%-a van: $100M exit-n√©l $5M k√ºl√∂nbs√©g!</div>
</div>
<div class="key-point">‚ö†Ô∏è <strong>Mindig k√©rdezz r√°: '$20 milli√≥ PRE-money, ugye?'</strong> Ha a VC habozik, val√≥sz√≠n≈±leg post-money-ra gondolt!</div>

<h3>Az Option Pool Csapda</h3>
<p>Az <span class="term" data-term="option pool">option pool</span> n√∂vel√©se <strong>PRE-MONEY alapon cs√∂kkenti a t√©nyleges √©rt√©kel√©st!</strong></p>

<div class="calc-box">
<h5>üßÆ Option Pool Hat√°sa</h5>
<table>
<thead><tr><th>Elem</th><th>Option pool N√âLK√úL</th><th>20% Option pool-lal</th></tr></thead>
<tbody>
<tr><td>Post-money</td><td>$25M</td><td>$25M</td></tr>
<tr><td>VC tulajdon</td><td>20%</td><td>20%</td></tr>
<tr><td>Option pool</td><td>10%</td><td>20%</td></tr>
<tr><td><strong>ALAP√çT√ìK</strong></td><td class="text-green"><strong>70%</strong></td><td class="text-red"><strong>60%</strong></td></tr>
</tbody>
</table>
<div class="result">Az extra 10% option pool AZ ALAP√çT√ìKT√ìL j√∂n, nem a VC-t≈ël!
Effekt√≠v pre-money: $20M - ($25M √ó 10%) = $17.5M
Val√≥di h√≠gul√°s: 70% ‚Üí 60% = 10 sz√°zal√©kpont!</div>
</div>
<div class="key-point">üí° <strong>K√©sz√≠ts option budget-et:</strong> list√°zd a tervezett felv√©teleket. Ezzel √©rvelhetsz kisebb pool mellett.</div>

<h3>Liquidation Preference</h3>
<p>A <span class="term" data-term="liquidation preference">liquidation preference</span> meghat√°rozza, ki kap p√©nzt el≈ësz√∂r egy exit-n√©l.</p>
<table>
<thead><tr><th>T√≠pus</th><th>Mit jelent</th><th>Neked</th></tr></thead>
<tbody>
<tr><td><span class="term" data-term="non-participating preferred">1√ó Non-participating</span></td><td>VC v√°laszt: preference VAGY %-os r√©szesed√©s</td><td class="text-green"><strong>LEGJOBB</strong></td></tr>
<tr><td>1√ó Capped participating</td><td>Preference + r√©szesed√©s, de van maximum</td><td class="text-yellow">K√∂zepes</td></tr>
<tr><td><span class="term" data-term="participating preferred">1√ó Full participating</span></td><td>Preference + korl√°tlan r√©szesed√©s</td><td class="text-red"><strong>ROSSZ</strong></td></tr>
<tr><td>2√ó+ participating</td><td>K√©tszeres visszafizet√©s + r√©szesed√©s</td><td class="text-red"><strong>NAGYON ROSSZ</strong></td></tr>
</tbody>
</table>

<div class="calc-box">
<h5>üßÆ Liquidation Preference Sz√°m√≠t√°si P√©lda</h5>
<p>Kiindul√°s: $5M befektet√©s, 33% VC tulajdon | Exit: $30M (sikeres)</p>
<table>
<thead><tr><th>Strukt√∫ra</th><th>VC kap</th><th>Alap√≠t√≥k kapnak</th></tr></thead>
<tbody>
<tr><td>1√ó Non-participating</td><td>$10M (33%)</td><td class="text-green">$20M</td></tr>
<tr><td>1√ó Full participating</td><td>$13.3M</td><td class="text-yellow">$16.7M</td></tr>
<tr><td>2√ó Full participating</td><td>$18.3M</td><td class="text-red">$11.7M</td></tr>
</tbody>
</table>
<div class="formula">1√ó Non-participating: VC = MAX(Preference, %-os r√©szesed√©s)
1√ó Participating: VC = Preference + %-os r√©szesed√©s a MARAD√âKB√ìL
2√ó Participating: VC = 2√óPreference + %-os r√©szesed√©s a MARAD√âKB√ìL</div>
</div>

<h3>Anti-dilution V√©delem</h3>
<p>Az <span class="term" data-term="anti-dilution">anti-dilution</span> v√©delem akkor l√©p √©letbe, ha <span class="term" data-term="down round">down round</span>-ot csin√°lsz.</p>

<div class="calc-box">
<h5>üßÆ Full Ratchet vs Weighted Average</h5>
<p>Series A: $2M @ $10/r√©szv√©ny = 200,000 r√©szv√©ny a VC-nek<br>Series B (down round): $3M @ $5/r√©szv√©ny</p>
<table>
<thead><tr><th>T√≠pus</th><th>M≈±k√∂d√©s</th><th>VC √∫j r√©szv√©nysz√°m</th><th>V√°ltoz√°s</th></tr></thead>
<tbody>
<tr><td><span class="term" data-term="full ratchet">Full Ratchet</span></td><td>R√©gi √°r TELJESEN lecs√∂kken</td><td>400,000</td><td class="text-red">+100%</td></tr>
<tr><td><span class="term" data-term="weighted average">Weighted Average</span></td><td>Figyelembe veszi a k√∂r m√©ret√©t</td><td>246,154</td><td class="text-green">+23%</td></tr>
</tbody>
</table>
<div class="result">A Full ratchet DUPL√ÅZZA a VC r√©szv√©nyeit ingyen! A Weighted average fair kompenz√°ci√≥t ad.</div>
</div>

<h3>Pay-to-Play</h3>
<p>A <span class="term" data-term="pay-to-play">pay-to-play</span> kik√©nyszer√≠ti, hogy a befektet≈ëk r√©szt vegyenek a k√∂vetkez≈ë k√∂r√∂kben. Ha nem vesznek r√©szt:</p>
<ul>
<li>Preferred r√©szv√©nyek common-ra konvert√°l√≥dnak</li>
<li>Elvesz√≠tik a liquidation preference-t</li>
<li>Elvesz√≠tik az anti-dilution v√©delmet</li>
</ul>
<div class="key-point">üí° <strong>A pay-to-play J√ì neked!</strong> Biztos√≠tja, hogy a befektet≈ëk ne csak a j√≥ id≈ëkben t√°mogassanak, hanem neh√©z helyzetben is melletted √°lljanak.</div>

<h3>Cap Table (T≈ëk√©s√≠t√©si T√°bl√°zat)</h3>
<p>A <span class="term" data-term="cap table">cap table</span> megmutatja a c√©g teljes tulajdonosi strukt√∫r√°j√°t.</p>
<div class="calc-box">
<h5>üßÆ Cap Table P√©lda</h5>
<p>$5M befektet√©s, $20M pre-money, 20% option pool (post-money)</p>
<table>
<thead><tr><th>Tulajdonos</th><th>R√©szv√©nyek</th><th>Tulajdon %</th><th>√ârt√©k</th></tr></thead>
<tbody>
<tr><td>Alap√≠t√≥k</td><td>4,000,000</td><td>46.67%</td><td>$11.67M</td></tr>
<tr><td>Option Pool</td><td>2,000,000</td><td>20.00%</td><td>$5.00M</td></tr>
<tr><td>Existing Angels</td><td>666,667</td><td>6.67%</td><td>$1.67M</td></tr>
<tr><td>Series A VC</td><td>2,666,667</td><td>26.67%</td><td>$6.67M</td></tr>
<tr><td><strong>√ñSSZESEN</strong></td><td>10,000,000</td><td>100%</td><td>$25M</td></tr>
</tbody>
</table>
</div>
<div class="key-point">‚ö†Ô∏è <strong>Az alap√≠t√≥knak MINDIG ellen≈ërizni√ºk kell a cap table-t!</strong> Ne b√≠zd az √ºgyv√©dre - hib√°zhatnak, √©s te fizeted az √°r√°t.</div>`
    },
    // ==================== MODUL 4: ANTI-DILUTION √âS PAY-TO-PLAY ====================
    {
        id: 4,
        title: "Anti-dilution √©s Pay-to-Play",
        icon: "üõ°Ô∏è",
        time: "25 perc",
        sections: [
            {
                title: "Mi az Anti-dilution?",
                content: `<p>Az <span class="term" data-term="anti-dilution">anti-dilution</span> v√©delem akkor l√©p √©letbe, ha <span class="term" data-term="down round">down round</span>-ot csin√°lsz (alacsonyabb √©rt√©kel√©sen veszel fel p√©nzt).</p>
                <p>A kor√°bbi befektet≈ëk t√∂bb r√©szv√©nyt kapnak kompenz√°ci√≥k√©nt.</p>`,
                warning: "A down round triggereli az anti-dilution v√©delmet - jelent≈ës h√≠gul√°st okozhat!"
            },
            {
                title: "Full Ratchet vs Weighted Average",
                content: `<table>
                    <thead><tr><th>T√≠pus</th><th>M≈±k√∂d√©s</th><th>Hat√°s</th></tr></thead>
                    <tbody>
                        <tr><td><span class="term" data-term="full ratchet">Full Ratchet</span></td><td>R√©gi √°r TELJESEN lecs√∂kken</td><td class="text-red">AGRESSZ√çV - Ker√ºlend≈ë!</td></tr>
                        <tr><td><span class="term" data-term="weighted average">Weighted Average</span></td><td>Figyelembe veszi a k√∂r m√©ret√©t</td><td class="text-green">STANDARD - Elfogadhat√≥</td></tr>
                    </tbody>
                </table>`,
                tip: "Mindig broad-based weighted average-et k√©rj, ez a fair megold√°s."
            },
            {
                title: "Pay-to-Play",
                content: `<p>A <span class="term" data-term="pay-to-play">pay-to-play</span> kik√©nyszer√≠ti, hogy a befektet≈ëk r√©szt vegyenek a k√∂vetkez≈ë k√∂r√∂kben.</p>
                <p>Ha NEM vesznek r√©szt:</p>
                <ul>
                    <li>Preferred ‚Üí common konverzi√≥</li>
                    <li>Elvesztik a liquidation preference-t</li>
                    <li>Elvesztik az anti-dilution v√©delmet</li>
                </ul>`,
                tip: "A pay-to-play J√ì neked! Biztos√≠tja, hogy a befektet≈ëk neh√©z id≈ëkben is t√°mogassanak."
            }
        ],
        quiz: [
            { q: "Melyik anti-dilution t√≠pus a legagressz√≠vebb?", o: ["Weighted average", "Full ratchet", "Broad-based", "Nincs ilyen"], a: 1, e: "A full ratchet TELJESEN lecs√∂kkenti a kor√°bbi √°rat az √∫j √°rra - extr√©m h√≠gul√°st okoz." },
            { q: "Mi t√∂rt√©nik pay-to-play eset√©n, ha a befektet≈ë nem vesz r√©szt?", o: ["Semmi", "Preferred‚Üícommon konverzi√≥", "T√∂bb r√©szv√©nyt kap", "Kil√©p"], a: 1, e: "A r√©szv√©nyek common-ra konvert√°l√≥dnak, elvesz√≠tve a preferred jogokat." }
        ],
        detailed: `<h3>Anti-dilution V√©delem</h3>
<p>Az <span class="term" data-term="anti-dilution">anti-dilution</span> v√©delem akkor l√©p √©letbe, ha <span class="term" data-term="down round">down round</span>-ot csin√°lsz.</p>

<div class="calc-box">
<h5>üßÆ Full Ratchet vs Weighted Average Sz√°m√≠t√°s</h5>
<p>Series A: $2M @ $10/r√©szv√©ny = 200,000 r√©szv√©ny a VC-nek<br>Series B (down round): $3M @ $5/r√©szv√©ny</p>
<table>
<thead><tr><th>T√≠pus</th><th>M≈±k√∂d√©s</th><th>VC √∫j r√©szv√©nysz√°m</th><th>V√°ltoz√°s</th></tr></thead>
<tbody>
<tr><td><span class="term" data-term="full ratchet">Full Ratchet</span></td><td>R√©gi √°r TELJESEN lecs√∂kken $5-ra</td><td>400,000</td><td class="text-red">+100%</td></tr>
<tr><td><span class="term" data-term="weighted average">Weighted Average</span></td><td>Figyelembe veszi a k√∂r m√©ret√©t</td><td>246,154</td><td class="text-green">+23%</td></tr>
</tbody>
</table>
<div class="result">A Full ratchet DUPL√ÅZZA a VC r√©szv√©nyeit ingyen! A Weighted average fair kompenz√°ci√≥t ad.</div>
</div>

<h3>Pay-to-Play</h3>
<p>A <span class="term" data-term="pay-to-play">pay-to-play</span> kik√©nyszer√≠ti, hogy a befektet≈ëk r√©szt vegyenek a k√∂vetkez≈ë k√∂r√∂kben. Ha nem vesznek r√©szt:</p>
<ul>
<li>Preferred r√©szv√©nyek common-ra konvert√°l√≥dnak</li>
<li>Elvesz√≠tik a liquidation preference-t</li>
<li>Elvesz√≠tik az anti-dilution v√©delmet</li>
</ul>
<div class="key-point">üí° <strong>A pay-to-play J√ì neked!</strong> Biztos√≠tja, hogy a befektet≈ëk ne csak a j√≥ id≈ëkben t√°mogassanak.</div>`
    },
    // ==================== MODUL 5: KONTROLL FELT√âTELEK ====================
    {
        id: 5,
        title: "Kontroll Felt√©telek",
        icon: "üéõÔ∏è",
        time: "25 perc",
        sections: [
            {
                title: "Board of Directors",
                content: `<p>A <span class="term" data-term="board of directors">board</span> a c√©g legf≈ëbb ir√°ny√≠t√≥ szerve.</p>
                <table>
                    <thead><tr><th>Poz√≠ci√≥</th><th>Ki v√°lasztja</th></tr></thead>
                    <tbody>
                        <tr><td>Common Seat (2√ó)</td><td class="text-blue">Alap√≠t√≥k</td></tr>
                        <tr><td>Preferred Seat (2√ó)</td><td class="text-purple">VC-k</td></tr>
                        <tr><td>F√ºggetlen</td><td class="text-yellow">K√∂z√∂s d√∂nt√©s</td></tr>
                    </tbody>
                </table>`,
                warning: "A f√ºggetlen tag a 'tie-breaker' - NAGYON fontos, ki lesz az!"
            },
            {
                title: "Protective Provisions",
                content: `<p>A <span class="term" data-term="protective provisions">protective provisions</span> = VC v√©t√≥jogok:</p>
                <ul>
                    <li>C√©g elad√°sa vagy merger</li>
                    <li>√öj r√©szv√©nyoszt√°ly l√©trehoz√°sa</li>
                    <li>Alap√≠t√≥ okirat m√≥dos√≠t√°sa</li>
                    <li>Board m√©ret v√°ltoztat√°s</li>
                    <li>Hitelfelv√©tel limit felett</li>
                </ul>`,
                tip: "A hitelfelv√©teli limit emel√©se gyakran az els≈ë, amit siker√ºl megt√°rgyalni."
            },
            {
                title: "Drag-Along √©s Conversion",
                content: `<div class="grid-2">
                    <div class="grid-box blue">
                        <h4><span class="term" data-term="drag-along">Drag-Along</span></h4>
                        <p>Ha t√∂bbs√©g egyet√©rt az elad√°ssal, mindenki k√∂teles eladni.</p>
                    </div>
                    <div class="grid-box purple">
                        <h4>Conversion</h4>
                        <p>Preferred b√°rikor √°tv√°lthat√≥ common-ra. Automatikus <span class="term" data-term="qualified ipo">Qualified IPO</span>-n√°l.</p>
                    </div>
                </div>`,
                tip: "A drag-along v√©d a 't√∫szejt≈ë' kisbefektet≈ëkt≈ël."
            }
        ],
        quiz: [
            { q: "Ki a 'tie-breaker' egy 5 f≈ës boardon (2-2-1)?", o: ["CEO", "Lead VC", "F√ºggetlen tag", "Alap√≠t√≥"], a: 2, e: "A f√ºggetlen tag d√∂nt≈ëb√≠r√≥ szerepet t√∂lt be 2-2 szavazatn√°l." },
            { q: "Mi a drag-along jog?", o: ["VC kil√©phet b√°rmikor", "T√∂bbs√©g k√©nyszer√≠theti kisebbs√©get elad√°sra", "Alap√≠t√≥ v√©t√≥jog", "Osztal√©k jog"], a: 1, e: "A drag-along lehet≈ëv√© teszi, hogy a t√∂bbs√©g k√©nyszer√≠tse a kisebbs√©get az elad√°sra." }
        ],
        detailed: `<h3>Board of Directors</h3>
<p>A <span class="term" data-term="board of directors">board</span> (igazgat√≥tan√°cs) a c√©g legf≈ëbb ir√°ny√≠t√≥ szerve. A CEO a board-nak tartozik besz√°mol√°ssal, √©s a board nevezi ki/v√°ltja le a CEO-t.</p>

<table>
<thead><tr><th>Poz√≠ci√≥</th><th>Ki v√°lasztja</th><th>Tipikus szem√©ly</th></tr></thead>
<tbody>
<tr><td><strong>1. Common Seat</strong></td><td class="text-blue">Alap√≠t√≥k</td><td>CEO</td></tr>
<tr><td><strong>2. Common Seat</strong></td><td class="text-blue">Alap√≠t√≥k</td><td>Co-founder</td></tr>
<tr><td><strong>3. Preferred Seat</strong></td><td class="text-purple">VC-k</td><td>Lead VC partner</td></tr>
<tr><td><strong>4. Preferred Seat</strong></td><td class="text-purple">VC-k</td><td>M√°sodik VC</td></tr>
<tr><td><strong>5. F√ºggetlen</strong></td><td class="text-yellow">K√∂z√∂s d√∂nt√©s</td><td>Ipar√°gi szak√©rt≈ë</td></tr>
</tbody>
</table>

<div class="key-point">‚ö†Ô∏è A f√ºggetlen tag a <strong>'tie-breaker'</strong> - NAGYON fontos, ki lesz az! Egy j√≥l m≈±k√∂d≈ë 5 f≈ës boardon (2 common, 2 preferred, 1 f√ºggetlen) ≈ë a d√∂nt≈ëb√≠r√≥.</div>

<h3>Protective Provisions (V√©t√≥jogok)</h3>
<p>A <span class="term" data-term="protective provisions">protective provisions</span> olyan d√∂nt√©sek list√°ja, amihez a VC-k beleegyez√©se sz√ºks√©ges. Ez effekt√≠ve v√©t√≥jog.</p>

<div class="example-box">
<h5>Tipikus v√©t√≥jogok:</h5>
<ul>
<li>C√©g elad√°sa vagy merger</li>
<li>√öj r√©szv√©nyoszt√°ly l√©trehoz√°sa</li>
<li>Alap√≠t√≥ okirat m√≥dos√≠t√°sa</li>
<li>Board m√©ret√©nek v√°ltoztat√°sa</li>
<li>Osztal√©k kifizet√©se</li>
<li>Hitelfelv√©tel bizonyos √∂sszeg felett</li>
</ul>
</div>
<div class="key-point">üí° A hitelfelv√©teli limit emel√©se gyakran az els≈ë, amit siker√ºl megt√°rgyalni. Kezdd ott!</div>

<h3>Drag-Along √©s Conversion</h3>
<div class="grid-2">
<div class="grid-box blue">
<h4>Drag-Along Rights</h4>
<p>Ha a t√∂bbs√©g (√°ltal√°ban 50%+ preferred + common) egyet√©rt az elad√°ssal, <strong>mindenki k√∂teles eladni</strong>. Ez v√©d a 't√∫szejt≈ë' kisbefektet≈ëkt≈ël.</p>
</div>
<div class="grid-box purple">
<h4>Conversion Rights</h4>
<p>A preferred b√°rikor √°tv√°lthat√≥ common-ra. <strong>Automatikus konverzi√≥</strong> <span class="term" data-term="qualified ipo">Qualified IPO</span> eset√©n (√°ltal√°ban $50M+ √©s meghat√°rozott r√©szv√©ny√°r).</p>
</div>
</div>

<h3>Egy√©b Term Sheet Felt√©telek</h3>

<h4>Dividends (Osztal√©k)</h4>
<p>A legt√∂bb startup nem fizet osztal√©kot, de a term sheet √°ltal√°ban tartalmaz osztal√©k rendelkez√©st:</p>
<ul>
<li><strong>Cumulative dividends:</strong> Ha nem fizetik ki, halmoz√≥dik - <span class="text-red">KER√úLEND≈ê!</span></li>
<li><strong>Non-cumulative dividends:</strong> Csak ha a board megszavazza - elfogadhat√≥</li>
</ul>

<h4>Redemption Rights</h4>
<p>A redemption jog lehet≈ëv√© teszi a VC-nek, hogy 5-7 √©v ut√°n 'visszaadassa' a r√©szv√©nyeit a c√©gnek. Ez ritka, de vesz√©lyes lehet, ha a c√©gnek nincs p√©nze a visszav√°lt√°sra.</p>
<div class="key-point">üí° Pr√≥b√°lj megszabadulni a redemption right-t√≥l, vagy legal√°bb told ki 7+ √©vre √©s k√∂sd board j√≥v√°hagy√°shoz.</div>

<h4>Information Rights</h4>
<p>Standard inform√°ci√≥s jogok a VC-k sz√°m√°ra:</p>
<ul>
<li>Negyed√©ves p√©nz√ºgyi jelent√©s</li>
<li>√âves audit</li>
<li>√âves k√∂lts√©gvet√©s √©s √ºzleti terv</li>
<li>Cap table hozz√°f√©r√©s</li>
</ul>

<h4>Pro Rata Rights</h4>
<p>A <span class="term" data-term="pro rata rights">pro rata</span> jog lehet≈ëv√© teszi a befektet≈ënek, hogy a k√∂vetkez≈ë k√∂r√∂kben ar√°nyosan r√©szt vegyen, megtartva a tulajdoni ar√°ny√°t.</p>
<div class="key-point">üí° A pro rata √°ltal√°ban elfogadhat√≥ - a befektet≈ëk szeretnek 'double-down'-olni a nyertes c√©gekre.</div>

<h4>No-Shop Clause</h4>
<p>Az exkluzivit√°si z√°rad√©k (<span class="term" data-term="no-shop clause">no-shop</span>, 45-60 nap) megtiltja m√°s befektet≈ëkkel val√≥ t√°rgyal√°st a term sheet al√°√≠r√°sa ut√°n. Ez az egyik K√ñTELEZ≈ê eleme a term sheet-nek.</p>
<div class="key-point">‚ö†Ô∏è Figyelj oda, hogy legyen <strong>'auto-terminate' klauzula</strong> - ha a VC abbahagyja a due diligence-t, a no-shop automatikusan megsz≈±nik.</div>`
    },
    // ==================== MODUL 6: A VC M≈∞K√ñD√âSE √âS T√ÅRGYAL√ÅS ====================
    {
        id: 6,
        title: "A VC M≈±k√∂d√©se",
        icon: "üè¶",
        time: "35 perc",
        sections: [
            {
                title: "LP √©s GP Strukt√∫ra",
                content: `<div class="grid-2">
                    <div class="grid-box blue">
                        <h4>Limited Partners (LP)</h4>
                        <p>Adj√°k a p√©nzt: nyugd√≠jalapok, endowmentek, family offices</p>
                    </div>
                    <div class="grid-box purple">
                        <h4>General Partners (GP)</h4>
                        <p>Kezelik a p√©nzt: d√∂nt√©sek, board tags√°g, exit</p>
                    </div>
                </div>`,
                tip: "A GP-k √°ltal√°ban az alap 1-5%-√°t fektetik be saj√°t p√©nz√ºkb≈ël."
            },
            {
                title: "Fee √©s Carry",
                content: `<table>
                    <thead><tr><th>T√≠pus</th><th>M√©rt√©k</th><th>Jelent√©s</th></tr></thead>
                    <tbody>
                        <tr><td><span class="term" data-term="management fee">Management Fee</span></td><td>1.5-2.5%/√©v</td><td>M≈±k√∂d√©si k√∂lts√©gek</td></tr>
                        <tr><td><span class="term" data-term="carried interest">Carried Interest</span></td><td>~20% profit</td><td>A F≈ê motiv√°ci√≥!</td></tr>
                    </tbody>
                </table>`,
                warning: "K√©s≈ëi f√°zis√∫ alap (7-8. √©v) t√ºrelmetlenebb lehet az exitre!"
            },
            {
                title: "Alap √âletciklusa",
                content: `<table>
                    <thead><tr><th>√âv</th><th>F√°zis</th><th>Tev√©kenys√©g</th></tr></thead>
                    <tbody>
                        <tr><td>1-3</td><td class="text-blue">Befektet√©s</td><td>70-80% t≈ëke kihelyez√©se</td></tr>
                        <tr><td>4-6</td><td class="text-yellow">Follow-on</td><td>Portf√≥li√≥ t√°mogat√°sa</td></tr>
                        <tr><td>7-10</td><td class="text-green">Harvesting</td><td>Exitek, alap lez√°r√°sa</td></tr>
                    </tbody>
                </table>`,
                tip: "K√©rdezd meg a VC-t, h√°ny √©ves az alapjuk - ez befoly√°solja t√ºrelm√ºket."
            }
        ],
        quiz: [
            { q: "Mi a 'carried interest'?", o: ["√âves fee", "Profit ~20%-a a GP-knek", "Hitelkamat", "LP osztal√©k"], a: 1, e: "A carry a profit r√©sze, amit a GP-k kapnak sikeres exitek ut√°n." },
            { q: "Melyik f√°zisban t√ºrelmetlenebb egy VC alap?", o: ["1-3 √©v", "4-6 √©v", "7-10 √©v", "Mindegy"], a: 2, e: "A 7-10. √©vben az alap a 'harvesting' f√°zisban van, nyom√°s alatt az exitre." }
        ],
        detailed: `<h3>LP √©s GP Strukt√∫ra</h3>
<p>A VC alapok √°ltal√°ban <span class="term" data-term="limited partnership">Limited Partnership (LP)</span> strukt√∫r√°ban m≈±k√∂dnek:</p>

<div class="grid-2">
<div class="grid-box blue">
<h4>Limited Partners (LP) - A p√©nzt adj√°k:</h4>
<ul>
<li>Nyugd√≠jalapok (legnagyobb LP kateg√≥ria)</li>
<li>Egyetemi endowmentek (Yale, Harvard)</li>
<li>Family offices (gazdag csal√°dok)</li>
<li>Fund of funds</li>
<li>Szuver√©n alapok (√°llami vagyon)</li>
</ul>
</div>
<div class="grid-box purple">
<h4>General Partners (GP) - A p√©nzt kezelik:</h4>
<ul>
<li>Hozz√°k a befektet√©si d√∂nt√©seket</li>
<li>√úlnek a portf√≥li√≥ c√©gek boardjaiban</li>
<li>Seg√≠tik a portf√≥li√≥ c√©geket</li>
<li>Kezelik az exiteket</li>
</ul>
</div>
</div>

<h3>Management Fee √©s Carried Interest</h3>
<table>
<thead><tr><th>T√≠pus</th><th>M√©rt√©k</th><th>P√©lda ($200M alap)</th></tr></thead>
<tbody>
<tr><td><span class="term" data-term="management fee">Management Fee</span></td><td>√âvi 1.5-2.5%</td><td>$3-5M / √©v</td></tr>
<tr><td><span class="term" data-term="carried interest">Carried Interest</span></td><td>~20% a profitb√≥l</td><td>Miut√°n LP-k visszakapt√°k t≈ëk√©j√ºket</td></tr>
</tbody>
</table>

<h3>Mi√©rt Keresnek Home Run-okat?</h3>
<p>A carry strukt√∫ra miatt <strong>egy nagy hozam sokkal √©rt√©kesebb, mint sok k√∂zepes</strong>. P√©lda:</p>

<div class="calc-box">
<h5>üßÆ Home Run vs K√∂zepes Hozamok</h5>
<table>
<thead><tr><th>Szcen√°ri√≥</th><th>Befektet√©sek</th><th>√ñsszes return</th><th>Profit</th><th>GP Carry</th></tr></thead>
<tbody>
<tr><td><strong>A:</strong> Mind 3√ó return</td><td>10 √ó $5M</td><td>~$150M</td><td>~$100M</td><td>~$20M</td></tr>
<tr><td><strong>B:</strong> 1 db 30√ó + 9 bukik</td><td>10 √ó $5M</td><td>~$150M</td><td>~$100M</td><td>~$20M</td></tr>
</tbody>
</table>
<div class="result">Ugyanaz a carry - de a B szcen√°ri√≥ SOKKAL k√∂nnyebb el√©rni!<br>Ez√©rt keresnek a VC-k olyan c√©geket, amik k√©pesek 10-100√ó-os hozamot hozni.</div>
</div>

<h3>Az Alap √âletciklusa</h3>
<table>
<thead><tr><th>√âv</th><th>F√°zis</th><th>Tev√©kenys√©g</th></tr></thead>
<tbody>
<tr><td>1-3</td><td class="text-blue"><strong>Befektet√©s</strong></td><td>A t≈ëke nagy r√©sz√©t (70-80%) befektetik</td></tr>
<tr><td>4-6</td><td class="text-yellow"><strong>Follow-on</strong></td><td>Megl√©v≈ë portf√≥li√≥ t√°mogat√°sa</td></tr>
<tr><td>7-10</td><td class="text-green"><strong>Harvesting</strong></td><td>Exitek realiz√°l√°sa, alap lez√°r√°sa</td></tr>
</tbody>
</table>

<div class="key-point">‚ö†Ô∏è <strong>Ha egy VC alap 7-8. √©v√©ben j√°r, T√úRELMETLENEBB lehet az exitre!</strong> K√©rdezd meg, h√°ny √©ves az alapjuk.</div>

<h3>Finansz√≠roz√°si F√°zisok</h3>

<h4>Seed F√°zis</h4>
<p>Jellemz≈ëk:</p>
<ul>
<li>Legalacsonyabb jogi k√∂lts√©gek, de legnagyobb hiba potenci√°l</li>
<li>A precedens sz√°m√≠t - amit itt be√°ll√≠tasz, az marad</li>
<li>Gyakran <span class="term" data-term="convertible note">convertible note</span> vagy SAFE</li>
</ul>

<div class="grid-2">
<div class="grid-box blue">
<h4>Convertible Note</h4>
<p><strong>El≈ëny:</strong> Egyszer≈±bb, olcs√≥bb, nincs √©rt√©kel√©s</p>
<p><strong>H√°tr√°ny:</strong> Lehet magasabb v√©gs≈ë √°r</p>
<p><strong>Mikor:</strong> Gyors lez√°r√°s kell</p>
</div>
<div class="grid-box purple">
<h4>Seed Preferred</h4>
<p><strong>El≈ëny:</strong> Tiszta tulajdoni strukt√∫ra</p>
<p><strong>H√°tr√°ny:</strong> Dr√°g√°bb, t√∂bb t√°rgyal√°s</p>
<p><strong>Mikor:</strong> Van id≈ë √©s p√©nz a t√°rgyal√°sra</p>
</div>
</div>

<h4>Early Stage (Series A/B)</h4>
<p>Az els≈ë VC k√∂r felt√©telei √°ltal√°ban fennmaradnak. Amit itt be√°ll√≠tasz:</p>
<ul>
<li>Liquidation preference strukt√∫ra</li>
<li>Anti-dilution t√≠pus</li>
<li>Board √∂sszet√©tel</li>
<li>Protective provisions</li>
</ul>
<div class="key-point">‚ö†Ô∏è Az els≈ë VC k√∂r felt√©telei <strong>precedenst teremtenek</strong>. T√°rgyalj kem√©nyen!</div>

<h4>Mid/Late Stage (Series C+)</h4>
<p>√öj kih√≠v√°sok:</p>
<ul>
<li><strong>Board kontroll probl√©m√°k</strong> (7-9 tag)</li>
<li><strong>√ârt√©kel√©si probl√©m√°k</strong> - t√∫l magas valu√°ci√≥ blokkol kisebb exiteket</li>
<li><strong>Liquidation stack</strong> - t√∂bb k√∂r preference halmoz√≥dik</li>
</ul>`
    }
];

// ==================== STATE ====================
let state = {
    currentModule: 0,
    currentSection: 0,
    showQuiz: false,
    showDetailed: false,
    quizState: { current: 0, score: 0, answered: false, selected: null },
    completed: {},
    results: {},
    showDefinition: null,
    definitionPos: { x: 0, y: 0 }
};

// ==================== RENDER ====================
function render() {
    const app = document.getElementById('app');
    const mod = MODULES[state.currentModule];
    const sec = mod.sections[state.currentSection];
    const totalProgress = Object.keys(state.completed).length;
    const progressPct = Math.round((totalProgress / MODULES.length) * 100);
    const circumference = 2 * Math.PI * 18;
    
    const userName = currentUser?.displayName || currentUser?.email?.split('@')[0] || 'Felhaszn√°l√≥';
    const userInitial = userName.charAt(0).toUpperCase();

    app.innerHTML = `
        <header>
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">üìö</span>
                    <div class="logo-text">
                        <h1>üéì Venturesuli</h1>
                        <p>Brad Feld & Jason Mendelson k√∂nyve alapj√°n</p>
                    </div>
                </div>
                <div class="header-right">
                    <div class="progress-container">
                        <div class="progress-info">
                            <p>Halad√°s</p>
                            <span>${totalProgress}/${MODULES.length} modul</span>
                        </div>
                        <div class="progress-ring">
                            <svg width="48" height="48">
                                <circle class="bg" cx="24" cy="24" r="18"/>
                                <circle class="fg" cx="24" cy="24" r="18" 
                                    stroke-dasharray="${(progressPct / 100) * circumference} ${circumference}"/>
                            </svg>
                            <span class="progress-text">${progressPct}%</span>
                        </div>
                    </div>
                    <button class="glossary-btn" onclick="downloadGlossaryPDF()">üìñ Fogalomt√°r PDF</button>
                    <div class="user-info">
                        <div class="user-avatar">${userInitial}</div>
                        <span class="user-name">${userName}</span>
                    </div>
                    <button class="logout-btn" onclick="handleLogout()">Kijelentkez√©s</button>
                    <button class="delete-account-btn" onclick="showDeleteAccountModal()">üóëÔ∏è Fi√≥k t√∂rl√©se</button>
                </div>
            </div>
        </header>

        <div class="container">
            <div class="layout">
                <aside class="sidebar">
                    <div class="sidebar-header">
                        <h2>Modulok</h2>
                        <button class="reset-btn" onclick="resetProgress()">Reset</button>
                    </div>
                    <div class="module-list">
                        ${MODULES.map((m, i) => `
                            <div class="module-item ${state.currentModule === i ? 'active' : ''}" 
                                 onclick="selectModule(${i})">
                                <span class="module-icon">${m.icon}</span>
                                <div class="module-info">
                                    <div class="module-title">${m.title}</div>
                                    <div class="module-meta">${m.time}</div>
                                </div>
                                ${state.completed[m.id] ? '<span class="module-check">‚úì</span>' : ''}
                            </div>
                        `).join('')}
                    </div>
                </aside>

                <main class="main">
                    <div class="card">
                        <div class="module-header">
                            <div class="module-header-content">
                                <span class="module-header-icon">${mod.icon}</span>
                                <div class="module-header-text">
                                    <span class="label">Modul ${state.currentModule + 1} / ${MODULES.length}</span>
                                    <h2>${mod.title}</h2>
                                </div>
                            </div>
                            ${!state.showQuiz ? `
                                <div class="section-nav">
                                    ${mod.sections.map((_, i) => `
                                        <div class="section-dot ${i === state.currentSection ? 'active' : ''}" 
                                             onclick="goToSection(${i})"></div>
                                    `).join('')}
                                    <div class="section-dot quiz ${state.showQuiz ? 'active' : ''}" 
                                         onclick="startQuiz()"></div>
                                </div>
                            ` : ''}
                        </div>

                        <div class="content">
                            ${state.showQuiz ? renderQuiz(mod) : renderSection(sec, mod)}
                        </div>

                        ${!state.showQuiz ? `
                            <div class="nav-footer">
                                <button class="nav-btn nav-btn-secondary" onclick="prevSection()" 
                                        ${state.currentSection === 0 ? 'disabled' : ''}>
                                    ‚Üê El≈ëz≈ë
                                </button>
                                ${state.completed[mod.id] ? `
                                    <button class="nav-btn nav-btn-primary" onclick="goToNextModule()" 
                                            ${state.currentModule >= MODULES.length - 1 ? 'disabled' : ''}>
                                        ${state.currentModule < MODULES.length - 1 ? 'K√∂vetkez≈ë modul ‚Üí' : 'üéâ Tanfolyam teljes√≠tve!'}
                                    </button>
                                ` : `
                                    <button class="nav-btn nav-btn-primary" onclick="nextSection()">
                                        ${state.currentSection < mod.sections.length - 1 ? 'K√∂vetkez≈ë ‚Üí' : 'Kv√≠z ind√≠t√°sa ‚Üí'}
                                    </button>
                                `}
                            </div>
                        ` : ''}
                    </div>

                    ${state.completed[mod.id] && !state.showQuiz ? `
                        <div class="completion-badge">
                            <span class="icon">üèÜ</span>
                            <div>
                                <h4>Modul teljes√≠tve!</h4>
                                <p>Kv√≠z eredm√©ny: ${state.results[mod.id]?.score}/${state.results[mod.id]?.total} pont</p>
                            </div>
                        </div>
                    ` : ''}

                    <div class="attribution">
                        <h4>Forr√°s</h4>
                        <p><span class="book-title">"Venture Deals"</span> - Brad Feld & Jason Mendelson</p>
                    </div>
                </main>
            </div>
        </div>

        ${state.showDefinition ? `
            <div class="definition-popup" style="left: ${state.definitionPos.x}px; top: ${state.definitionPos.y}px;">
                <button class="close-btn" onclick="closeDefinition()">√ó</button>
                <div class="term-name">${state.showDefinition.term}</div>
                <div class="term-def">${state.showDefinition.definition}</div>
            </div>
        ` : ''}
    `;

    document.querySelectorAll('.term').forEach(el => {
        el.addEventListener('click', (e) => showDefinition(e, el.dataset.term));
    });
}

function renderSection(sec, mod) {
    return `
        <h3 class="section-title">${sec.title}</h3>
        <div class="section-body">${sec.content}</div>
        ${sec.tip ? `<div class="tip-box"><span class="icon">üí°</span><p>${sec.tip}</p></div>` : ''}
        ${sec.warning ? `<div class="warning-box"><span class="icon">‚ö†Ô∏è</span><p>${sec.warning}</p></div>` : ''}
        ${mod.detailed ? `
            <div class="learn-more-section">
                <button class="learn-more-toggle ${state.showDetailed ? 'open' : ''}" onclick="toggleDetailed()">
                    üìñ Tudj meg t√∂bbet <span class="arrow">‚ñº</span>
                </button>
                <div class="learn-more-content ${state.showDetailed ? 'open' : ''}">
                    <button class="pdf-btn" onclick="downloadPDF()">üì• PDF let√∂lt√©s</button>
                    <div class="detailed-summary">${mod.detailed}</div>
                </div>
            </div>
        ` : ''}
    `;
}

function renderQuiz(mod) {
    const quiz = mod.quiz;
    const qs = state.quizState;
    
    if (qs.current >= quiz.length) {
        const pct = Math.round((qs.score / quiz.length) * 100);
        return `
            <div class="quiz-results">
                <span class="icon">${pct >= 70 ? 'üéâ' : 'üìö'}</span>
                <h3>Kv√≠z v√©ge!</h3>
                <div class="score">${qs.score}/${quiz.length}</div>
                <p class="pct">${pct}% - ${pct >= 70 ? 'Sz√©p munka!' : '√ârdemes √°tism√©telni!'}</p>
                <div class="buttons">
                    <button class="nav-btn nav-btn-secondary" onclick="restartQuiz()">√öjra</button>
                    <button class="nav-btn nav-btn-primary" onclick="finishQuiz()">Befejez√©s</button>
                </div>
            </div>
        `;
    }

    const q = quiz[qs.current];
    return `
        <div class="quiz-header"><h3>K√©rd√©s ${qs.current + 1}/${quiz.length}</h3><span>${qs.score} pont</span></div>
        <div class="quiz-progress"><div class="quiz-progress-bar" style="width: ${((qs.current + (qs.answered ? 1 : 0)) / quiz.length) * 100}%"></div></div>
        <p class="quiz-question">${q.q}</p>
        <div class="quiz-options">
            ${q.o.map((opt, i) => `
                <button class="quiz-option ${qs.answered ? (i === q.a ? 'correct' : i === qs.selected ? 'incorrect' : '') : qs.selected === i ? 'selected' : ''}" 
                    onclick="selectAnswer(${i})" ${qs.answered ? 'disabled' : ''}>
                    ${String.fromCharCode(65 + i)}) ${opt}
                </button>
            `).join('')}
        </div>
        ${qs.answered ? `<div class="quiz-feedback ${qs.selected === q.a ? 'correct' : 'incorrect'}">
            <p class="title">${qs.selected === q.a ? '‚úì Helyes!' : '‚úó Helytelen'}</p>
            <p class="explanation">${q.e}</p>
        </div>` : ''}
        <div class="nav-footer" style="border:none; padding-top:20px;">
            <div></div>
            ${!qs.answered ? `<button class="nav-btn nav-btn-primary" onclick="checkAnswer()" ${qs.selected === null ? 'disabled' : ''}>Ellen≈ërz√©s</button>` 
            : `<button class="nav-btn nav-btn-primary" onclick="nextQuestion()">${qs.current < quiz.length - 1 ? 'K√∂vetkez≈ë ‚Üí' : 'Eredm√©ny ‚Üí'}</button>`}
        </div>
    `;
}

// ==================== ACTIONS ====================
window.selectModule = (i) => { state.currentModule = i; state.currentSection = 0; state.showQuiz = false; state.showDetailed = false; state.quizState = { current: 0, score: 0, answered: false, selected: null }; render(); };
window.goToNextModule = () => { if (state.currentModule < MODULES.length - 1) { state.currentModule++; state.currentSection = 0; state.showQuiz = false; state.showDetailed = false; state.quizState = { current: 0, score: 0, answered: false, selected: null }; render(); } };
window.goToSection = (i) => { state.currentSection = i; state.showDetailed = false; render(); };
window.nextSection = () => { const mod = MODULES[state.currentModule]; if (state.currentSection < mod.sections.length - 1) { state.currentSection++; state.showDetailed = false; } else { state.showQuiz = true; state.quizState = { current: 0, score: 0, answered: false, selected: null }; } render(); };
window.prevSection = () => { if (state.currentSection > 0) { state.currentSection--; state.showDetailed = false; } render(); };
window.startQuiz = () => { state.showQuiz = true; state.quizState = { current: 0, score: 0, answered: false, selected: null }; render(); };
window.selectAnswer = (i) => { if (!state.quizState.answered) { state.quizState.selected = i; render(); } };
window.checkAnswer = () => { const q = MODULES[state.currentModule].quiz[state.quizState.current]; if (state.quizState.selected === q.a) state.quizState.score++; state.quizState.answered = true; render(); };
window.nextQuestion = () => { state.quizState.current++; state.quizState.answered = false; state.quizState.selected = null; render(); };
window.restartQuiz = () => { state.quizState = { current: 0, score: 0, answered: false, selected: null }; render(); };
window.finishQuiz = async () => { const mod = MODULES[state.currentModule]; state.completed[mod.id] = true; state.results[mod.id] = { score: state.quizState.score, total: mod.quiz.length }; state.showQuiz = false; state.currentSection = 0; await saveProgress(); render(); };
window.toggleDetailed = () => { state.showDetailed = !state.showDetailed; render(); };
window.resetProgress = async () => { if (confirm('Biztosan t√∂rl√∂d a halad√°st?')) { state.completed = {}; state.results = {}; await saveProgress(); render(); } };

function showDefinition(e, term) {
    e.preventDefault(); e.stopPropagation();
    const definition = GLOSSARY[term.toLowerCase()] || `"${term}" - Defin√≠ci√≥ nem tal√°lhat√≥.`;
    const rect = e.target.getBoundingClientRect();
    state.showDefinition = { term, definition };
    state.definitionPos = { x: Math.min(rect.left, window.innerWidth - 420), y: rect.bottom + window.scrollY + 10 };
    render();
}

window.closeDefinition = () => { state.showDefinition = null; render(); };
document.addEventListener('click', (e) => { if (state.showDefinition && !e.target.closest('.definition-popup') && !e.target.classList.contains('term')) window.closeDefinition(); });

window.downloadPDF = () => {
    const mod = MODULES[state.currentModule];
    
    const pdfContent = document.createElement('div');
    pdfContent.style.cssText = 'font-family: Arial, sans-serif; padding: 40px; max-width: 800px; background: white; color: #1a1a1a; line-height: 1.6;';
    
    pdfContent.innerHTML = `
        <div style="border-bottom: 2px solid #3b82f6; padding-bottom: 20px; margin-bottom: 30px;">
            <h1 style="color: #1e293b; font-size: 28px; margin: 0 0 10px 0;">${mod.icon} ${mod.title}</h1>
            <p style="color: #64748b; font-size: 14px; margin: 0;">Venturesuli</p>
            <p style="color: #94a3b8; font-size: 12px; margin: 5px 0 0 0;">Brad Feld & Jason Mendelson k√∂nyve alapj√°n</p>
        </div>
        <div style="font-size: 14px;">
            ${mod.detailed
                .replace(/class="calc-box"/g, 'style="background: #f0fdf4; border: 1px solid #86efac; border-radius: 8px; padding: 20px; margin: 20px 0;"')
                .replace(/class="formula"/g, 'style="background: #1e293b; color: #fbbf24; padding: 15px; border-radius: 6px; font-family: monospace; white-space: pre-wrap; margin: 10px 0;"')
                .replace(/class="result"/g, 'style="background: #dcfce7; color: #166534; padding: 12px; border-radius: 6px; font-weight: bold; margin-top: 10px;"')
                .replace(/class="example-box"/g, 'style="background: #eff6ff; border: 1px solid #93c5fd; border-radius: 8px; padding: 20px; margin: 20px 0;"')
                .replace(/class="key-point"/g, 'style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 15px; margin: 15px 0;"')
                .replace(/<h3>/g, '<h3 style="color: #1e293b; font-size: 20px; margin: 30px 0 15px 0; border-bottom: 1px solid #e2e8f0; padding-bottom: 8px;">')
                .replace(/<h4>/g, '<h4 style="color: #475569; font-size: 14px; margin: 20px 0 10px 0;">')
                .replace(/<h5>/g, '<h5 style="color: #059669; font-size: 16px; margin-bottom: 15px;">')
                .replace(/<table>/g, '<table style="width: 100%; border-collapse: collapse; margin: 15px 0; font-size: 13px;">')
                .replace(/<th>/g, '<th style="background: #f1f5f9; padding: 12px; text-align: left; border: 1px solid #e2e8f0;">')
                .replace(/<td>/g, '<td style="padding: 12px; border: 1px solid #e2e8f0;">')
                .replace(/<strong>/g, '<strong style="color: #0f172a;">')
            }
        </div>
        <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #e2e8f0; text-align: center;">
            <p style="color: #94a3b8; font-size: 11px;">¬© 2024 Venturesuli (venturesuli.hu)
                    <br><a href="aszf.html" target="_blank" style="color: #f59e0b; text-decoration: none; margin-right: 10px;">√ÅSZF</a>
                    <a href="adatvedelem.html" target="_blank" style="color: #f59e0b; text-decoration: none;">Adatv√©delem</a></p>
        </div>
    `;
    
    html2pdf().set({
        margin: 10,
        filename: mod.title.replace(/[^a-zA-Z0-9√°√©√≠√≥√∂≈ë√∫√º≈±√Å√â√ç√ì√ñ≈ê√ö√ú≈∞\s]/g, '') + '.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
    }).from(pdfContent).save();
};

window.downloadGlossaryPDF = () => {
    const sortedTerms = Object.entries(GLOSSARY).sort((a, b) => a[0].localeCompare(b[0], 'hu'));
    
    const pdfContent = document.createElement('div');
    pdfContent.style.cssText = 'font-family: Arial, sans-serif; padding: 40px; max-width: 800px; background: white; color: #1a1a1a; line-height: 1.6;';
    
    pdfContent.innerHTML = `
        <div style="border-bottom: 3px solid #8b5cf6; padding-bottom: 20px; margin-bottom: 30px; text-align: center;">
            <h1 style="color: #1e293b; font-size: 32px; margin: 0 0 10px 0;">üìñ Venturesuli Fogalomt√°r</h1>
            <p style="color: #64748b; font-size: 14px; margin: 0;">A kock√°zati t≈ëke befektet√©sek legfontosabb fogalmai</p>
            <p style="color: #94a3b8; font-size: 12px; margin: 10px 0 0 0;">Brad Feld & Jason Mendelson "Venture Deals" k√∂nyve alapj√°n</p>
        </div>
        
        <div style="column-count: 1; column-gap: 30px;">
            ${sortedTerms.map(([term, def]) => `
                <div style="break-inside: avoid; margin-bottom: 20px; padding: 15px; background: #f8fafc; border-radius: 8px; border-left: 4px solid #8b5cf6;">
                    <h3 style="color: #4f46e5; font-size: 16px; margin: 0 0 8px 0; text-transform: capitalize;">${term}</h3>
                    <p style="color: #475569; font-size: 13px; margin: 0; line-height: 1.5;">${def}</p>
                </div>
            `).join('')}
        </div>
        
        <div style="margin-top: 40px; padding-top: 20px; border-top: 2px solid #e2e8f0; text-align: center;">
            <p style="color: #64748b; font-size: 12px; margin: 0;">√ñsszesen ${sortedTerms.length} fogalom</p>
            <p style="color: #94a3b8; font-size: 11px; margin: 5px 0 0 0;">¬© 2024 Venturesuli (venturesuli.hu)
                    <br><a href="aszf.html" target="_blank" style="color: #f59e0b; text-decoration: none; margin-right: 10px;">√ÅSZF</a>
                    <a href="adatvedelem.html" target="_blank" style="color: #f59e0b; text-decoration: none;">Adatv√©delem</a></p>
        </div>
    `;
    
    html2pdf().set({
        margin: 10,
        filename: 'Venturesuli-Fogalomtar.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
    }).from(pdfContent).save();
};

// ==================== FIREBASE FUNCTIONS ====================
async function saveProgress() {
    if (!currentUser) return;
    try {
        await db.collection('users').doc(currentUser.uid).update({
            progress: { completed: state.completed, results: state.results },
            lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
        });
    } catch (error) { console.error('Error saving progress:', error); }
}

async function loadProgress() {
    if (!currentUser) return;
    try {
        const doc = await db.collection('users').doc(currentUser.uid).get();
        if (doc.exists && doc.data().progress) {
            const progress = doc.data().progress;
            state.completed = progress.completed || {};
            state.results = progress.results || {};
        }
    } catch (error) { console.error('Error loading progress:', error); }
}

window.handleLogout = async () => {
    try {
        await auth.signOut();
        window.location.href = 'index.html';
    } catch (error) { console.error('Logout error:', error); }
};

// ==================== ACCOUNT DELETION ====================
window.showDeleteAccountModal = () => {
    const modal = document.createElement('div');
    modal.className = 'modal-overlay';
    modal.id = 'deleteAccountModal';
    modal.innerHTML = `
        <div class="modal-content">
            <div class="modal-icon">‚ö†Ô∏è</div>
            <h2 class="modal-title">Fi√≥k t√∂rl√©se</h2>
            <p class="modal-text">Biztosan t√∂r√∂lni szeretn√©d a fi√≥kodat? Ez a m≈±velet <strong>nem visszavonhat√≥</strong>.</p>
            <div class="modal-warning">
                <strong>A k√∂vetkez≈ëk t√∂rl≈ëdnek v√©glegesen:</strong><br>
                ‚Ä¢ Minden halad√°si adatod<br>
                ‚Ä¢ Kv√≠z eredm√©nyeid<br>
                ‚Ä¢ Felhaszn√°l√≥i fi√≥kod
            </div>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-cancel" onclick="closeDeleteAccountModal()">M√©gse</button>
                <button class="modal-btn modal-btn-delete" id="confirmDeleteBtn" onclick="confirmDeleteAccount()">V√©glegesen t√∂rl√∂m</button>
            </div>
        </div>
    `;
    document.body.appendChild(modal);
};

window.closeDeleteAccountModal = () => {
    const modal = document.getElementById('deleteAccountModal');
    if (modal) modal.remove();
};

window.confirmDeleteAccount = async () => {
    const deleteBtn = document.getElementById('confirmDeleteBtn');
    if (deleteBtn) {
        deleteBtn.disabled = true;
        deleteBtn.textContent = 'T√∂rl√©s folyamatban...';
    }
    
    try {
        const user = auth.currentUser;
        if (!user) {
            alert('Nincs bejelentkezett felhaszn√°l√≥.');
            return;
        }
        
        // 1. Delete user data from Firestore
        await db.collection('users').doc(user.uid).delete();
        console.log('User data deleted from Firestore');
        
        // 2. Delete the Firebase Auth account
        await user.delete();
        console.log('User account deleted');
        
        // 3. Close modal and redirect
        closeDeleteAccountModal();
        alert('A fi√≥kod sikeresen t√∂r√∂lve lett. K√∂sz√∂nj√ºk, hogy vel√ºnk tanult√°l!');
        window.location.href = 'index.html';
        
    } catch (error) {
        console.error('Delete account error:', error);
        
        // Handle re-authentication requirement
        if (error.code === 'auth/requires-recent-login') {
            closeDeleteAccountModal();
            alert('Biztons√°gi okokb√≥l √∫jra be kell jelentkezned a fi√≥k t√∂rl√©s√©hez. K√©rlek jelentkezz ki, majd √∫jra be, √©s pr√≥b√°ld √∫jra.');
        } else {
            alert('Hiba t√∂rt√©nt a fi√≥k t√∂rl√©sekor: ' + error.message);
        }
        
        if (deleteBtn) {
            deleteBtn.disabled = false;
            deleteBtn.textContent = 'V√©glegesen t√∂rl√∂m';
        }
    }
};

// ==================== AUTH CHECK ====================
auth.onAuthStateChanged(async (user) => {
    if (user) {
        // Check if user has paid
        const userDoc = await db.collection('users').doc(user.uid).get();
        if (userDoc.exists && userDoc.data().hasPaid) {
            currentUser = user;
            userData = userDoc.data();
            await loadProgress();
            document.getElementById('loading-overlay').classList.add('hidden');
            render();
        } else {
            window.location.href = 'payment.html?userId=' + user.uid + '&email=' + encodeURIComponent(user.email);
        }
    } else {
        window.location.href = 'auth.html';
    }
});
    </script>
</body>
</html>
